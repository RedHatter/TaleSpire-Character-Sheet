var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,n,r){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function l(e,t,n,r){if(e){const o=c(e,t,n,r);return e[0](o)}}function c(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function u(e,t,n,r,o,i,s){const a=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(a){const o=c(t,n,r,s);e.p(o,a)}}function f(t){return t&&i(t.destroy)?t.destroy:e}const p="undefined"!=typeof window;let h=p?()=>window.performance.now():()=>Date.now(),d=p?e=>requestAnimationFrame(e):e;const m=new Set;function v(e){m.forEach((t=>{t.c(e)||(m.delete(t),t.f())})),0!==m.size&&d(v)}function g(e){let t;return 0===m.size&&d(v),{promise:new Promise((n=>{m.add(t={c:e,f:n})})),abort(){m.delete(t)}}}function $(e,t){e.appendChild(t)}function y(e,t,n){e.insertBefore(t,n||null)}function b(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function _(){return k(" ")}function E(){return k("")}function S(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function A(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e){return""===e?null:+e}function N(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function T(e,t){e.value=null==t?"":t}function M(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function O(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function q(e,t,n){e.classList[n?"add":"remove"](t)}function D(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const R=new Set;let j,P=0;function F(e,t,n,r,o,i,s,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*i(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=e.ownerDocument;R.add(p);const h=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(w("style")).sheet),d=p.__svelte_rules||(p.__svelte_rules={});d[f]||(d[f]=!0,h.insertRule(`@keyframes ${f} ${u}`,h.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${o}ms 1 both`,P+=1,f}function B(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),P-=o,P||d((()=>{P||(R.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),R.clear())})))}function L(e){j=e}function W(){if(!j)throw new Error("Function called outside component initialization");return j}function U(e){W().$$.on_mount.push(e)}function z(){const e=W();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=D(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}function H(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const X=[],J=[],K=[],V=[],Y=Promise.resolve();let G=!1;function Q(e){K.push(e)}function Z(e){V.push(e)}let ee=!1;const te=new Set;function ne(){if(!ee){ee=!0;do{for(let e=0;e<X.length;e+=1){const t=X[e];L(t),re(t.$$)}for(L(null),X.length=0;J.length;)J.pop()();for(let e=0;e<K.length;e+=1){const t=K[e];te.has(t)||(te.add(t),t())}K.length=0}while(X.length);for(;V.length;)V.pop()();G=!1,ee=!1,te.clear()}}function re(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}let oe;function ie(){return oe||(oe=Promise.resolve(),oe.then((()=>{oe=null}))),oe}function se(e,t,n){e.dispatchEvent(D(`${t?"intro":"outro"}${n}`))}const ae=new Set;let le;function ce(){le={r:0,c:[],p:le}}function ue(){le.r||o(le.c),le=le.p}function fe(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function pe(e,t,n,r){if(e&&e.o){if(ae.has(e))return;ae.add(e),le.c.push((()=>{ae.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const he={duration:0};function de(n,r,o){let s,a,l=r(n,o),c=!1,u=0;function f(){s&&B(n,s)}function p(){const{delay:r=0,duration:o=300,easing:i=t,tick:p=e,css:d}=l||he;d&&(s=F(n,0,1,o,r,i,d,u++)),p(0,1);const m=h()+r,v=m+o;a&&a.abort(),c=!0,Q((()=>se(n,!0,"start"))),a=g((e=>{if(c){if(e>=v)return p(1,0),se(n,!0,"end"),f(),c=!1;if(e>=m){const t=i((e-m)/o);p(t,1-t)}}return c}))}let d=!1;return{start(){d||(B(n),i(l)?(l=l(),ie().then(p)):p())},invalidate(){d=!1},end(){c&&(f(),c=!1)}}}function me(n,r,s){let a,l=r(n,s),c=!0;const u=le;function f(){const{delay:r=0,duration:i=300,easing:s=t,tick:f=e,css:p}=l||he;p&&(a=F(n,1,0,i,r,s,p));const d=h()+r,m=d+i;Q((()=>se(n,!1,"start"))),g((e=>{if(c){if(e>=m)return f(0,1),se(n,!1,"end"),--u.r||o(u.c),!1;if(e>=d){const t=s((e-d)/i);f(1-t,t)}}return c}))}return u.r+=1,i(l)?ie().then((()=>{l=l(),f()})):f(),{end(e){e&&l.tick&&l.tick(1,0),c&&(a&&B(n,a),c=!1)}}}function ve(n,r,s,a){let l=r(n,s),c=a?0:1,u=null,f=null,p=null;function d(){p&&B(n,p)}function m(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function v(r){const{delay:i=0,duration:s=300,easing:a=t,tick:v=e,css:$}=l||he,y={start:h()+i,b:r};r||(y.group=le,le.r+=1),u||f?f=y:($&&(d(),p=F(n,c,r,s,i,a,$)),r&&v(0,1),u=m(y,s),Q((()=>se(n,r,"start"))),g((e=>{if(f&&e>f.start&&(u=m(f,s),f=null,se(n,u.b,"start"),$&&(d(),p=F(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)v(c=u.b,1-c),se(n,u.b,"end"),f||(u.b?d():--u.group.r||o(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),v(c,1-c)}return!(!u&&!f)})))}return{run(e){i(l)?ie().then((()=>{l=l(),v(e)})):v(e)},end(){d(),u=f=null}}}function ge(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function $e(e){e&&e.c()}function ye(e,t,r,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,r),s||Q((()=>{const t=l.map(n).filter(i);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(Q)}function be(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(e,t){-1===e.$$.dirty[0]&&(X.push(e),G||(G=!0,Y.then(ne)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(t,n,i,s,a,l,c=[-1]){const u=j;L(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=i?i(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),p&&xe(t,e)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&fe(t.$$.fragment),ye(t,n.target,n.anchor,n.customElement),ne()}L(u)}class ke{$destroy(){be(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var _e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ee(e){var t={exports:{}};return e(t,t.exports),t.exports}function Se(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}
/*!
        localForage -- Offline Storage, Improved
        Version 1.9.0
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */var Ae=Ee((function(e,t){e.exports=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){if(!a&&Se)return Se(s);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return o(n||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var i=Se,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,s=new o(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}function f(e){1!==c.push(e)||r||n()}t.exports=f}).call(this,void 0!==_e?_e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function s(){t(o,r)}var a=d(s);"error"===a.status&&r(a.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function m(e){return e instanceof this?e:i.resolve(new this(o),e)}function v(e){var t=new this(o);return i.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(o);++l<n;)u(e[l],l);return c;function u(e,o){function l(e){s[o]=e,++a!==n||r||(r=!0,i.resolve(c,s))}t.resolve(e).then(l,(function(e){r||(r=!0,i.reject(c,e))}))}}function $(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(o);++s<n;)l(e[s]);return a;function l(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(a,e))}),(function(e){r||(r=!0,i.reject(a,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(o);return this.state!==l?f(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=d(p,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=m,c.reject=v,c.all=g,c.race=$},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==_e?_e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=i();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",m=void 0,v={},g=Object.prototype.toString,$="readonly",y="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new c((function(t){var n=e.transaction(d,y),r=l([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function w(e){return"boolean"==typeof m?c.resolve(m):x(e).then((function(e){return m=e}))}function k(e){var t=v[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function _(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var n=v[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new c((function(n,r){if(v[e.name]=v[e.name]||R(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=s.open.apply(s,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),_(e)}}))}function A(e){return S(e,!1)}function I(e){return S(e,!0)}function C(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function N(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function T(e){return l([b(atob(e.data))],{type:e.type})}function M(e){return e&&e.__local_forage_encoded_blob}function O(e){var t=this,n=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(n,e,e),n}function q(e){k(e);for(var t=v[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,A(e).then((function(t){return e.db=t,C(e)?I(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw E(e,t),t}))}function D(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),I(e)})).then((function(){return q(e).then((function(){D(e,t,n,r-1)}))})).catch(n);n(o)}}function R(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=v[n.name];o||(o=R(),v[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=O);var i=[];function s(){return c.resolve()}for(var a=0;a<o.forages.length;a++){var l=o.forages[a];l!==t&&i.push(l._initReady().catch(s))}var u=o.forages.slice(0);return c.all(i).then((function(){return n.db=o.db,A(n)})).then((function(e){return n.db=e,C(n,t._defaultConfig.version)?I(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function P(e,t){var n=this;e=p(e);var r=new c((function(t,r){n.ready().then((function(){D(n._dbInfo,$,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),M(e)&&(e=T(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function F(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){D(n._dbInfo,$,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;M(r)&&(r=T(r));var o=e(r,n.key,a++);void 0!==o?t(o):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function B(e,t,n){var r=this;e=p(e);var o=new c((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(t)?w(i.db).then((function(e){return e?t:N(t)})):t})).then((function(t){D(r._dbInfo,y,(function(i,s){if(i)return o(i);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=l.error?l.error:l.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return u(o,n),o}function L(e,t){var n=this;e=p(e);var r=new c((function(t,r){n.ready().then((function(){D(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function W(e){var t=this,n=new c((function(e,n){t.ready().then((function(){D(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function U(e){var t=this,n=new c((function(e,n){t.ready().then((function(){D(t._dbInfo,$,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function z(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){D(n._dbInfo,$,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function H(e){var t=this,n=new c((function(e,n){t.ready().then((function(){D(t._dbInfo,$,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function X(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):A(e).then((function(t){var n=v[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=v[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var a=o[i];a._dbInfo.db=null,a._dbInfo.version=n}return new c((function(t,r){var o=s.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,_(n._dbInfo)}})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){k(e);var n=v[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new c((function(t,n){var r=s.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)_(r[t]._dbInfo)})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}))}else r=c.reject("Invalid arguments");return u(r,t),r}var J={_driver:"asyncStorage",_initStorage:j,_support:a(),iterate:F,getItem:P,setItem:B,removeItem:L,clear:W,length:U,key:z,keys:H,dropInstance:X};function K(){return"function"==typeof openDatabase}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",G=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",se="si32",ae="ur16",le="ui32",ce="fl32",ue="fl64",fe=Z+ee.length,pe=Object.prototype.toString;function he(e){var t,n,r,o,i,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=V.indexOf(e[t]),r=V.indexOf(e[t+1]),o=V.indexOf(e[t+2]),i=V.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|o>>2,u[l++]=(3&o)<<6|63&i;return c}function de(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=V[n[t]>>2],r+=V[(3&n[t])<<4|n[t+1]>>4],r+=V[(15&n[t+1])<<2|n[t+2]>>6],r+=V[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function me(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,o=Q;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=ae:"[object Int32Array]"===n?o+=se:"[object Uint32Array]"===n?o+=le:"[object Float32Array]"===n?o+=ce:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+de(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Y+e.type+"~"+de(this.result);t(Q+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ve(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(fe),r=e.substring(Z,fe);if(r===te&&G.test(n)){var o=n.match(G);t=o[1],n=n.substring(o[0].length)}var i=he(n);switch(r){case ee:return i;case te:return l([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case ae:return new Uint16Array(i);case se:return new Int32Array(i);case le:return new Uint32Array(i);case ce:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ge={serialize:me,deserialize:ve,stringToBuffer:he,bufferToString:de};function $e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){$e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,o}function be(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):$e(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,s)}),i)}function xe(e,t){var n=this;e=p(e);var r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function we(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,s=i.length,a=0;a<s;a++){var l=i.item(a),c=l.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e,t,n,r){var o=this;e=p(e);var i=new c((function(i,s){o.ready().then((function(){void 0===t&&(t=null);var a=t,l=o._dbInfo;l.serializer.serialize(t,(function(t,c){c?s(c):l.db.transaction((function(n){be(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(ke.apply(o,[e,a,n,r-1]));s(t)}}))}))})).catch(s)}));return u(i,n),i}function _e(e,t,n){return ke.apply(this,[e,t,n,1])}function Ee(e,t){var n=this;e=p(e);var r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Se(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ae(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ie(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ce(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ne(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Te(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return u(r=e.name?new c((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ne(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function o(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,a=e.storeNames.length;s<a;s++)i.push(o(e.storeNames[s]));c.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),r}var Me={_driver:"webSQLStorage",_initStorage:ye,_support:K(),iterate:we,getItem:xe,setItem:_e,removeItem:Ee,clear:Se,length:Ae,key:Ie,keys:Ce,dropInstance:Te};function Oe(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function qe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function De(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Re(){return!De()||localStorage.length>0}function je(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=qe(e,t._defaultConfig),Re()?(t._dbInfo=n,n.serializer=ge,c.resolve()):c.reject()}function Pe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function Fe(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,s=1,a=0;a<i;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(o),s++)))return c}}}));return u(r,t),r}function Le(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function We(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function ze(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function He(e,t,n){var r=this;e=p(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(o,i){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(s.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return u(o,n),o}function Xe(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return u(r=e.name?new c((function(t){e.storeName?t(qe(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),t),r}var Je={_driver:"localStorageWrapper",_initStorage:je,_support:Oe(),iterate:Be,getItem:Fe,setItem:He,removeItem:ze,clear:Pe,length:Ue,key:Le,keys:We,dropInstance:Xe},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ve=function(e,t){for(var n=e.length,r=0;r<n;){if(Ke(e[r],t))return!0;r++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ge={},Qe={},Ze={INDEXEDDB:J,WEBSQL:Me,LOCALSTORAGE:Je},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var st=new(function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],i=r._driver;this[n]=i,Ge[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),s=0,a=i.length;s<a;s++){var l=i[s];if((!Ve(tt,l)||e[l])&&"function"!=typeof e[l])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}}();var f=function(n){Ge[r]&&console.info("Redefining LocalForage driver: "+r),Ge[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return f(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ge[e]?c.resolve(Ge[e]):c.reject(new Error("Driver not found."));return f(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(ge);return f(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ye(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function s(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var a=new Error("No available storage method found.");return r._driverSet=c.reject(a),r._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),f(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=st},{3:3}]},{},[4])(4)})),Ie=Ee((function(e,t){!function(e,t){function n(e){return n.result?n.result:e&&"function"==typeof e.getSerializer?(n.result=e.getSerializer(),n.result):Promise.reject(new Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function r(e,t){return t&&e.then((function(e){t(null,e)}),(function(e){t(e)})),e}function o(e,t){var n=this.getItem(e).then((function(t){return{key:e,value:t}}));return r(n,t),n}function i(e){var t=this;return new Promise((function(n,r){for(var i=[],s=0,a=e.length;s<a;s++)i.push(o.call(t,e[s]));Promise.all(i).then((function(e){for(var t={},r=0,o=e.length;r<o;r++){var i=e[r];t[i.key]=i.value}n(t)})).catch(r)}))}function s(){var e={};return this.iterate((function(t,n){e[n]=t})).then((function(){return e}))}function a(){return"undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=typeof mozIDBKeyRange?mozIDBKeyRange:void 0}t="default"in t?t.default:t;var l=a();function c(e){e=e.slice();var t=this;function n(e,t){return e<t?-1:e>t?1:0}return new Promise((function(r,o){t.ready().then((function(){var i=t._dbInfo,s=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=e.sort(n),c=l.bound(e[0],e[e.length-1],!1,!1),u=s.openCursor(c),f={},p=0;u.onsuccess=function(){var e=u.result;if(e){for(var t=e.key;t>a[p];)if(++p===a.length)return void r(f);if(t===a[p]){var n=e.value;void 0===n&&(n=null),f[t]=n,e.continue()}else e.continue(a[p])}else r(f)},u.onerror=function(){o(u.error)}})).catch(o)}))}function u(e){var t=this;return new Promise((function(r,o){t.ready().then((function(){return n(t)})).then((function(n){var i=t._dbInfo;i.db.transaction((function(t){for(var s=new Array(e.length),a=0,l=e.length;a<l;a++)s[a]="?";t.executeSql("SELECT * FROM "+i.storeName+" WHERE (key IN ("+s.join(",")+"))",e,(function(e,t){for(var o={},i=t.rows,s=0,a=i.length;s<a;s++){var l=i.item(s),c=l.value;c&&(c=n.deserialize(c)),o[l.key]=c}r(o)}),(function(e,t){o(t)}))}))})).catch(o)}))}function f(e,t){var n,o=this;if(arguments.length&&null!==e){var a=o.driver();n=a===o.INDEXEDDB?c.apply(o,arguments):a===o.WEBSQL?u.apply(o,arguments):i.apply(o,arguments)}else n=s.apply(o);return r(n,t),n}function p(e){var t=Object.getPrototypeOf(e);t&&(t.getItems=f,t.getItems.indexedDB=function(){return c.apply(this,arguments)},t.getItems.websql=function(){return u.apply(this,arguments)},t.getItems.generic=function(){return i.apply(this,arguments)})}var h=p(t);e.localforageGetItems=f,e.extendPrototype=p,e.extendPrototypeResult=h,e.getItemsGeneric=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,Ae)}));const Ce=[];function Ne(e){const t=e-1;return t*t*t+1}function Te(e,{delay:t=0,duration:n=400,easing:r=Ne,x:o=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-u*t}`}}function Me(e,{delay:t=0,duration:n=400,easing:r=Ne}={}){const o=getComputedStyle(e),i=+o.opacity,s=parseFloat(o.height),a=parseFloat(o.paddingTop),l=parseFloat(o.paddingBottom),c=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),p=parseFloat(o.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*i};height: ${e*s}px;padding-top: ${e*a}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*f}px;border-bottom-width: ${e*p}px;`}}function Oe(e=0,t){return void 0===t&&(t=e,e=0),Array.from({length:t-e},((t,n)=>n+e))}function qe(e,t){return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,t(n,e)])))}function De(e){return Object.entries(e).filter((e=>"number"==typeof e[1])).map((([e,t])=>({value:t,text:e})))}const Re=new ResizeObserver((e=>{for(const t of e){const e=t.target;e.style.backgroundImage=Pe(e.clientWidth,e.clientHeight),e.style.backgroundRepeat="no-repeat"}}));function je(e,t){return t&&Re.observe(e),{update(t){t?Re.observe(e):(Re.unobserve(e),e.style.backgroundImage="")},destroy(){Re.unobserve(e)}}}function Pe(e,t){const n=()=>10*Math.random()+20,r=()=>2*Math.random();let o=`M ${r()} ${r()}`,i=e-2,s=t-2;for(let e=0;e<i;e+=n())o+=` L ${Math.min(e,i).toFixed(3)} ${r().toFixed(3)}`;for(let e=0;e<s;e+=n())o+=` L ${(i-r()).toFixed(3)} ${Math.min(e,s).toFixed(3)}`;for(let e=i;e>0;e-=n())o+=` L ${Math.max(e,0).toFixed(3)} ${(s-r()).toFixed(3)}`;for(let e=s;e>0;e-=n())o+=` L ${r().toFixed(3)} ${Math.max(e,0).toFixed(3)}`;return o+=" Z",`url('data:image/svg+xml;utf8,<svg viewBox="0 0 ${e} ${t}" xmlns="http://www.w3.org/2000/svg"><path d="${o}" fill="none" stroke="%23444" stroke-width="1"/></svg>')`}function Fe(e,t={target:document.body}){t.target.append(e)}function Be(e){let t,n,r,i,s,a,c,p;const h=e[4].default,d=l(h,e,e[3],null);return{c(){t=w("div"),n=w("div"),d&&d.c(),I(n,"class",r=e[0]+" rounded bg-white shadow"),I(t,"class","fixed inset-0 z-50 flex overflow-auto items-center justify-center")},m(r,o){y(r,t,o),$(t,n),d&&d.m(n,null),a=!0,c||(p=[S(window,"keydown",e[6]),S(window,"popstate",e[2]),S(n,"click",A(e[5])),f(Fe.call(null,t)),S(t,"click",e[2])],c=!0)},p(e,[t]){d&&d.p&&(!a||8&t)&&u(d,h,e,e[3],t,null,null),(!a||1&t&&r!==(r=e[0]+" rounded bg-white shadow"))&&I(n,"class",r)},i(e){a||(fe(d,e),Q((()=>{s&&s.end(1),i||(i=de(n,Te,{duration:300,y:-50})),i.start()})),a=!0)},o(t){pe(d,t),i&&i.invalidate(),s=me(n,e[1],{duration:300,y:-50}),a=!1},d(e){e&&b(t),d&&d.d(e),e&&s&&s.end(),c=!1,o(p)}}}function Le(e,t,n){let{$$slots:r={},$$scope:o}=t;const i=z();let{class:s=""}=t;function a(){i("close")}U((()=>{document.getElementsByTagName("main")[0].classList.add("filter","blur"),history.pushState("dialog",null)}));return e.$$set=e=>{"class"in e&&n(0,s=e.class),"$$scope"in e&&n(3,o=e.$$scope)},[s,function(e,t){return document.getElementsByTagName("main")[0].classList.remove("filter","blur"),"dialog"===history.state&&history.back(),Te(e,t)},a,o,r,function(t){H(e,t)},e=>"Escape"==e.key&&a()]}class We extends ke{constructor(e){super(),we(this,e,Le,Be,s,{class:0})}}function Ue(e,t,n){const r=e.slice();return r[5]=t[n],r}function ze(e,t,n){const r=e.slice();return r[0]=t[n].value,r[8]=t[n].text,r}function He(e){let t,n,r,o=e[5].text+"";return{c(){t=w("option"),n=k(o),t.__value=r=e[5].value,t.value=t.__value},m(e,r){y(e,t,r),$(t,n)},p(e,i){2&i&&o!==(o=e[5].text+"")&&N(n,o),2&i&&r!==(r=e[5].value)&&(t.__value=r,t.value=t.__value)},d(e){e&&b(t)}}}function Xe(e){let t,n,r=e[5].items,o=[];for(let t=0;t<r.length;t+=1)o[t]=Je(ze(e,r,t));return{c(){t=w("optgroup");for(let e=0;e<o.length;e+=1)o[e].c();I(t,"label",n=e[5].text)},m(e,n){y(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,i){if(2&i){let n;for(r=e[5].items,n=0;n<r.length;n+=1){const s=ze(e,r,n);o[n]?o[n].p(s,i):(o[n]=Je(s),o[n].c(),o[n].m(t,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}2&i&&n!==(n=e[5].text)&&I(t,"label",n)},d(e){e&&b(t),x(o,e)}}}function Je(e){let t,n,r,o=e[8]+"";return{c(){t=w("option"),n=k(o),t.__value=r=e[0],t.value=t.__value},m(e,r){y(e,t,r),$(t,n)},p(e,i){2&i&&o!==(o=e[8]+"")&&N(n,o),2&i&&r!==(r=e[0])&&(t.__value=r,t.value=t.__value)},d(e){e&&b(t)}}}function Ke(e){let t;function n(e,t){return null!=e[5].items?Xe:He}let r=n(e),o=r(e);return{c(){o.c(),t=E()},m(e,n){o.m(e,n),y(e,t,n)},p(e,i){r===(r=n(e))&&o?o.p(e,i):(o.d(1),o=r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&b(t)}}}function Ve(t){let n,r,o,i,s,a,l,c,u,f,p,h,d=t[1],m=[];for(let e=0;e<d.length;e+=1)m[e]=Ke(Ue(t,d,e));return{c(){n=w("label"),r=w("div"),o=k(t[2]),i=_(),s=w("select");for(let e=0;e<m.length;e+=1)m[e].c();a=_(),l=w("div"),c=_(),u=w("span"),u.textContent="arrow_drop_down",I(r,"class","ml-2 text-gray-600 text-xs pointer-events-none"),I(s,"class","pr-8 pb-2 pl-1 w-full svelte-1g51mnc"),void 0===t[0]&&Q((()=>t[4].call(s))),I(l,"class","h-0.5 absolute right-0 bottom w-full bg-blue-500 svelte-1g51mnc"),I(u,"class","material-icons bottom-2 right-1 absolute text-gray-400 svelte-1g51mnc"),I(n,"class",f=t[3]+" relative block pt-2 border-b border-gray-200")},m(e,f){y(e,n,f),$(n,r),$(r,o),$(n,i),$(n,s);for(let e=0;e<m.length;e+=1)m[e].m(s,null);M(s,t[0]),$(n,a),$(n,l),$(n,c),$(n,u),p||(h=S(s,"change",t[4]),p=!0)},p(e,[t]){if(4&t&&N(o,e[2]),2&t){let n;for(d=e[1],n=0;n<d.length;n+=1){const r=Ue(e,d,n);m[n]?m[n].p(r,t):(m[n]=Ke(r),m[n].c(),m[n].m(s,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=d.length}3&t&&M(s,e[0]),8&t&&f!==(f=e[3]+" relative block pt-2 border-b border-gray-200")&&I(n,"class",f)},i:e,o:e,d(e){e&&b(n),x(m,e),p=!1,h()}}}function Ye(e,t,n){let{items:r}=t,{label:o}=t,{value:i}=t,{class:s=""}=t;return e.$$set=e=>{"items"in e&&n(1,r=e.items),"label"in e&&n(2,o=e.label),"value"in e&&n(0,i=e.value),"class"in e&&n(3,s=e.class)},[i,r,o,s,function(){i=O(this),n(0,i),n(1,r)}]}class Ge extends ke{constructor(e){super(),we(this,e,Ye,Ve,s,{items:1,label:2,value:0,class:3})}}function Qe(t){let n,r,o,i,s,a,l,c,u,f,p=t[0]?"Yes":"No";return{c(){n=w("label"),r=w("input"),o=_(),i=w("div"),s=k(t[1]),a=_(),l=w("div"),c=k(p),I(r,"class","hidden"),I(r,"type","checkbox"),r.disabled=t[2],I(i,"class","text-gray-600 text-xs pointer-events-none"),I(n,"class","relative block p-2 border-b border-gray-200"),q(n,"opacity-30",t[2])},m(e,p){y(e,n,p),$(n,r),r.checked=t[0],$(n,o),$(n,i),$(i,s),$(n,a),$(n,l),$(l,c),u||(f=S(r,"change",t[3]),u=!0)},p(e,[t]){4&t&&(r.disabled=e[2]),1&t&&(r.checked=e[0]),2&t&&N(s,e[1]),1&t&&p!==(p=e[0]?"Yes":"No")&&N(c,p),4&t&&q(n,"opacity-30",e[2])},i:e,o:e,d(e){e&&b(n),u=!1,f()}}}function Ze(e,t,n){let{value:r}=t,{label:o}=t,{disabled:i=!1}=t;return e.$$set=e=>{"value"in e&&n(0,r=e.value),"label"in e&&n(1,o=e.label),"disabled"in e&&n(2,i=e.disabled)},[r,o,i,function(){r=this.checked,n(0,r)}]}class et extends ke{constructor(e){super(),we(this,e,Ze,Qe,s,{value:0,label:1,disabled:2})}}function tt(e){let t,n,r,o,i,s;function a(t){e[2](t)}let l={label:"Theme",items:[{text:"Material",value:rt.MATERIAL},{text:"Simple",value:rt.SIMPLE},{text:"Fancy",value:rt.FANCY}]};function c(t){e[3](t)}void 0!==e[1]&&(l.value=e[1]),t=new Ge({props:l}),J.push((()=>ge(t,"value",a)));let u={label:"Dark Mode"};return void 0!==e[0]&&(u.value=e[0]),o=new et({props:u}),J.push((()=>ge(o,"value",c))),{c(){$e(t.$$.fragment),r=_(),$e(o.$$.fragment)},m(e,n){ye(t,e,n),y(e,r,n),ye(o,e,n),s=!0},p(e,r){const s={};!n&&2&r&&(n=!0,s.value=e[1],Z((()=>n=!1))),t.$set(s);const a={};!i&&1&r&&(i=!0,a.value=e[0],Z((()=>i=!1))),o.$set(a)},i(e){s||(fe(t.$$.fragment,e),fe(o.$$.fragment,e),s=!0)},o(e){pe(t.$$.fragment,e),pe(o.$$.fragment,e),s=!1},d(e){be(t,e),e&&b(r),be(o,e)}}}function nt(e){let t,n;return t=new We({props:{class:"flex",$$slots:{default:[tt]},$$scope:{ctx:e}}}),t.$on("close",e[4]),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,[n]){const r={};35&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}var rt;!function(e){e.MATERIAL="material",e.SIMPLE="simple",e.FANCY="fancy"}(rt||(rt={}));const ot=function(t,n=e){let r;const o=[];function i(e){if(s(t,e)&&(t=e,r)){const e=!Ce.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),Ce.push(n,t)}if(e){for(let e=0;e<Ce.length;e+=2)Ce[e][0](Ce[e+1]);Ce.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const l=[s,a];return o.push(l),1===o.length&&(r=n(i)||e),s(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}(rt.MATERIAL);function it(t,n,r){let o,i=e;a(t,ot,(e=>r(1,o=e))),t.$$.on_destroy.push((()=>i()));let s=!1;return t.$$.update=()=>{1&t.$$.dirty&&document.body.classList.toggle("dark",s)},[s,o,function(e){o=e,ot.set(o)},function(e){s=e,r(0,s)},function(e){H(t,e)}]}class st extends ke{constructor(e){super(),we(this,e,it,nt,s,{})}}var at="INUMBER",lt="IOP1",ct="IOP2",ut="IOP3",ft="IVAR",pt="IVARNAME",ht="IFUNCALL",dt="IFUNDEF",mt="IEXPR",vt="IEXPREVAL",gt="IMEMBER",$t="IENDSTATEMENT",yt="IARRAY";function bt(e,t){this.type=e,this.value=null!=t?t:0}function xt(e){return new bt(lt,e)}function wt(e){return new bt(ct,e)}function kt(e){return new bt(ut,e)}function _t(e,t,n,r,o){for(var i,s,a,l,c=[],u=[],f=0;f<e.length;f++){var p=e[f],h=p.type;if(h===at||h===pt)Array.isArray(p.value)?c.push.apply(c,_t(p.value.map((function(e){return new bt(at,e)})).concat(new bt(yt,p.value.length)),t,n,r,o)):c.push(p);else if(h===ft&&o.hasOwnProperty(p.value))p=new bt(at,o[p.value]),c.push(p);else if(h===ct&&c.length>1)s=c.pop(),i=c.pop(),l=n[p.value],p=new bt(at,l(i.value,s.value)),c.push(p);else if(h===ut&&c.length>2)a=c.pop(),s=c.pop(),i=c.pop(),"?"===p.value?c.push(i.value?s.value:a.value):(l=r[p.value],p=new bt(at,l(i.value,s.value,a.value)),c.push(p));else if(h===lt&&c.length>0)i=c.pop(),l=t[p.value],p=new bt(at,l(i.value)),c.push(p);else if(h===mt){for(;c.length>0;)u.push(c.shift());u.push(new bt(mt,_t(p.value,t,n,r,o)))}else if(h===gt&&c.length>0)i=c.pop(),c.push(new bt(at,i.value[p.value]));else{for(;c.length>0;)u.push(c.shift());u.push(p)}}for(;c.length>0;)u.push(c.shift());return u}function Et(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o],s=i.type;if(s===ft&&i.value===t)for(var a=0;a<n.tokens.length;a++){var l,c=n.tokens[a];l=c.type===lt?xt(c.value):c.type===ct?wt(c.value):c.type===ut?kt(c.value):new bt(c.type,c.value),r.push(l)}else s===mt?r.push(new bt(mt,Et(i.value,t,n))):r.push(i)}return r}function St(e,t,n){var r,o,i,s,a,l,c=[];if(It(e))return Ct(e,n);for(var u=e.length,f=0;f<u;f++){var p=e[f],h=p.type;if(h===at||h===pt)c.push(p.value);else if(h===ct)o=c.pop(),r=c.pop(),"and"===p.value?c.push(!!r&&!!St(o,t,n)):"or"===p.value?c.push(!!r||!!St(o,t,n)):"="===p.value?(s=t.binaryOps[p.value],c.push(s(r,St(o,t,n),n))):(s=t.binaryOps[p.value],c.push(s(Ct(r,n),Ct(o,n))));else if(h===ut)i=c.pop(),o=c.pop(),r=c.pop(),"?"===p.value?c.push(St(r?o:i,t,n)):(s=t.ternaryOps[p.value],c.push(s(Ct(r,n),Ct(o,n),Ct(i,n))));else if(h===ft)if(p.value in t.functions)c.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))c.push(t.unaryOps[p.value]);else{var d=n[p.value];if(void 0===d)throw new Error("undefined variable: "+p.value);c.push(d)}else if(h===lt)r=c.pop(),s=t.unaryOps[p.value],c.push(s(Ct(r,n)));else if(h===ht){for(l=p.value,a=[];l-- >0;)a.unshift(Ct(c.pop(),n));if(!(s=c.pop()).apply||!s.call)throw new Error(s+" is not a function");c.push(s.apply(void 0,a))}else if(h===dt)c.push(function(){for(var e=c.pop(),r=[],o=p.value;o-- >0;)r.unshift(c.pop());var i=c.pop(),s=function(){for(var o=Object.assign({},n),i=0,s=r.length;i<s;i++)o[r[i]]=arguments[i];return St(e,t,o)};return Object.defineProperty(s,"name",{value:i,writable:!1}),n[i]=s,s}());else if(h===mt)c.push(At(p,t));else if(h===vt)c.push(p);else if(h===gt)r=c.pop(),c.push(r[p.value]);else if(h===$t)c.pop();else{if(h!==yt)throw new Error("invalid Expression");for(l=p.value,a=[];l-- >0;)a.unshift(c.pop());c.push(a)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Ct(c[0],n)}function At(e,t,n){return It(e)?e:{type:vt,value:function(n){return St(e.value,t,n)}}}function It(e){return e&&e.type===vt}function Ct(e,t){return It(e)?e.value(t):e}function Nt(e,t){for(var n,r,o,i,s,a,l=[],c=0;c<e.length;c++){var u=e[c],f=u.type;if(f===at)"number"==typeof u.value&&u.value<0?l.push("("+u.value+")"):Array.isArray(u.value)?l.push("["+u.value.map(Tt).join(", ")+"]"):l.push(Tt(u.value));else if(f===ct)r=l.pop(),n=l.pop(),i=u.value,t?"^"===i?l.push("Math.pow("+n+", "+r+")"):"and"===i?l.push("(!!"+n+" && !!"+r+")"):"or"===i?l.push("(!!"+n+" || !!"+r+")"):"||"===i?l.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):"=="===i?l.push("("+n+" === "+r+")"):"!="===i?l.push("("+n+" !== "+r+")"):"["===i?l.push(n+"[("+r+") | 0]"):l.push("("+n+" "+i+" "+r+")"):"["===i?l.push(n+"["+r+"]"):l.push("("+n+" "+i+" "+r+")");else if(f===ut){if(o=l.pop(),r=l.pop(),n=l.pop(),"?"!==(i=u.value))throw new Error("invalid Expression");l.push("("+n+" ? "+r+" : "+o+")")}else if(f===ft||f===pt)l.push(u.value);else if(f===lt)n=l.pop(),"-"===(i=u.value)||"+"===i?l.push("("+i+n+")"):t?"not"===i?l.push("(!"+n+")"):"!"===i?l.push("fac("+n+")"):l.push(i+"("+n+")"):"!"===i?l.push("("+n+"!)"):l.push("("+i+" "+n+")");else if(f===ht){for(a=u.value,s=[];a-- >0;)s.unshift(l.pop());i=l.pop(),l.push(i+"("+s.join(", ")+")")}else if(f===dt){for(r=l.pop(),a=u.value,s=[];a-- >0;)s.unshift(l.pop());n=l.pop(),t?l.push("("+n+" = function("+s.join(", ")+") { return "+r+" })"):l.push("("+n+"("+s.join(", ")+") = "+r+")")}else if(f===gt)n=l.pop(),l.push(n+"."+u.value);else if(f===yt){for(a=u.value,s=[];a-- >0;)s.unshift(l.pop());l.push("["+s.join(", ")+"]")}else if(f===mt)l.push("("+Nt(u.value,t)+")");else if(f!==$t)throw new Error("invalid Expression")}return l.length>1&&(l=t?[l.join(",")]:[l.join(";")]),String(l[0])}function Tt(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function Mt(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function Ot(e,t,n){for(var r=!!(n=n||{}).withMembers,o=null,i=0;i<e.length;i++){var s=e[i];s.type===ft||s.type===pt?r||Mt(t,s.value)?null!==o?(Mt(t,o)||t.push(o),o=s.value):o=s.value:t.push(s.value):s.type===gt&&r&&null!==o?o+="."+s.value:s.type===mt?Ot(s.value,t,n):null!==o&&(Mt(t,o)||t.push(o),o=null)}null===o||Mt(t,o)||t.push(o)}function qt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}bt.prototype.toString=function(){switch(this.type){case at:case lt:case ct:case ut:case ft:case pt:case $t:return this.value;case ht:return"CALL "+this.value;case dt:return"DEF "+this.value;case yt:return"ARRAY "+this.value;case gt:return"."+this.value;default:return"Invalid Instruction"}},qt.prototype.simplify=function(e){return e=e||{},new qt(_t(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},qt.prototype.substitute=function(e,t){return t instanceof qt||(t=this.parser.parse(String(t))),new qt(Et(this.tokens,e,t),this.parser)},qt.prototype.evaluate=function(e){return e=e||{},St(this.tokens,this,e)},qt.prototype.toString=function(){return Nt(this.tokens,!1)},qt.prototype.symbols=function(e){e=e||{};var t=[];return Ot(this.tokens,t,e),t},qt.prototype.variables=function(e){e=e||{};var t=[];Ot(this.tokens,t,e);var n=this.functions;return t.filter((function(e){return!(e in n)}))},qt.prototype.toJSFunction=function(e,t){var n=this,r=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Nt(this.simplify(t).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var Dt="TEOF",Rt="TOP",jt="TNUMBER",Pt="TSTRING",Ft="TPAREN",Bt="TBRACKET",Lt="TCOMMA",Wt="TNAME",Ut="TSEMICOLON";function zt(e,t,n){this.type=e,this.value=t,this.index=n}function Ht(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}zt.prototype.toString=function(){return this.type+": "+this.value},Ht.prototype.newToken=function(e,t,n){return new zt(e,t,null!=n?n:this.pos)},Ht.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},Ht.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},Ht.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Dt,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},Ht.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,t+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var o=this.expression.substring(t+1,r);this.current=this.newToken(Pt,this.unescape(o),t),e=!0;break}r=this.expression.indexOf(n,r+1)}return e},Ht.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(Ft,e),this.pos++,!0)},Ht.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("["))&&(this.current=this.newToken(Bt,e),this.pos++,!0)},Ht.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(Lt,","),this.pos++,!0)},Ht.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(Ut,";"),this.pos++,!0)},Ht.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(r in this.consts)return this.current=this.newToken(jt,this.consts[r]),this.pos+=r.length,!0}return!1},Ht.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(Rt,r),this.pos+=r.length,!0}return!1},Ht.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()){if(t===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(t===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var o=this.expression.substring(e,t);return this.current=this.newToken(Wt,o),this.pos+=o.length,!0}return!1},Ht.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Xt=/^[0-9a-f]{4}$/i;function Jt(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}Ht.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var r=e.charAt(++t);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var o=e.substring(t+1,t+5);Xt.test(o)||this.parseError("Illegal escape sequence: \\u"+o),n+=String.fromCharCode(parseInt(o,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++t;var i=e.indexOf("\\",t);n+=e.substring(t,i<0?e.length:i),t=i}return n},Ht.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},Ht.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var r=!1,o=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!t.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(jt,parseInt(this.expression.substring(o,n),e)),this.pos=n),r},Ht.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,r=n,o=n,i=!1,s=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!i&&"."===e);)"."===e?i=!0:s=!0,n++,t=s;if(t&&(o=n),"e"===e||"E"===e){n++;for(var a=!0,l=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;l=!0,a=!1}else a=!1;n++}l||(n=o)}return t?(this.current=this.newToken(jt,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=o,t},Ht.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(Rt,t);else if("∙"===t||"•"===t)this.current=this.newToken(Rt,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Rt,">="),this.pos++):this.current=this.newToken(Rt,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Rt,"<="),this.pos++):this.current=this.newToken(Rt,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Rt,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Rt,"=="),this.pos++):this.current=this.newToken(Rt,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Rt,"!="),this.pos++):this.current=this.newToken(Rt,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},Ht.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},Ht.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},Ht.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},Jt.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Jt.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?Mt(t,e.value):"function"==typeof t?t(e):e.value===t)},Jt.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Jt.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Jt.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t))&&(this.next(),!0)},Jt.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},Jt.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(Wt)||this.accept(Rt,(function(e){return e.value in t})))e.push(new bt(ft,this.current.value));else if(this.accept(jt))e.push(new bt(at,this.current.value));else if(this.accept(Pt))e.push(new bt(at,this.current.value));else if(this.accept(Ft,"("))this.parseExpression(e),this.expect(Ft,")");else{if(!this.accept(Bt,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(Bt,"]"))e.push(new bt(yt,0));else{var n=this.parseArrayList(e);e.push(new bt(yt,n))}}},Jt.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},Jt.prototype.pushExpression=function(e,t){for(var n=0,r=t.length;n<r;n++)e.push(t[n])},Jt.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(Ut)&&(!this.nextToken||this.nextToken.type===Dt||this.nextToken.type===Ft&&")"===this.nextToken.value||t.push(new bt($t)),this.nextToken.type!==Dt&&this.parseExpression(t),e.push(new bt(mt,t)),!0)},Jt.prototype.parseArrayList=function(e){for(var t=0;!this.accept(Bt,"]");)for(this.parseExpression(e),++t;this.accept(Lt);)this.parseExpression(e),++t;return t},Jt.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(Rt,"=");){var t=e.pop(),n=[],r=e.length-1;if(t.type!==ht){if(t.type!==ft&&t.type!==gt)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new bt(pt,t.value)),e.push(new bt(mt,n)),e.push(wt("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=t.value+1;o<i;o++){var s=r-o;e[s].type===ft&&(e[s]=new bt(pt,e[s].value))}this.parseVariableAssignmentExpression(n),e.push(new bt(mt,n)),e.push(new bt(dt,t.value))}}},Jt.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(Rt,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(Rt,":"),this.parseConditionalExpression(n),e.push(new bt(mt,t)),e.push(new bt(mt,n)),e.push(kt("?"))}},Jt.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(Rt,"or");){var t=[];this.parseAndExpression(t),e.push(new bt(mt,t)),e.push(wt("or"))}},Jt.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(Rt,"and");){var t=[];this.parseComparison(t),e.push(new bt(mt,t)),e.push(wt("and"))}};var Kt=["==","!=","<","<=",">=",">","in"];Jt.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(Rt,Kt);){var t=this.current;this.parseAddSub(e),e.push(wt(t.value))}};var Vt=["+","-","||"];Jt.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(Rt,Vt);){var t=this.current;this.parseTerm(e),e.push(wt(t.value))}};var Yt=["*","/","%"];function Gt(e,t){return Number(e)+Number(t)}function Qt(e,t){return e-t}function Zt(e,t){return e*t}function en(e,t){return e/t}function tn(e,t){return e%t}function nn(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function rn(e,t){return e===t}function on(e,t){return e!==t}function sn(e,t){return e>t}function an(e,t){return e<t}function ln(e,t){return e>=t}function cn(e,t){return e<=t}function un(e,t){return Boolean(e&&t)}function fn(e,t){return Boolean(e||t)}function pn(e,t){return Mt(t,e)}function hn(e){return(Math.exp(e)-Math.exp(-e))/2}function dn(e){return(Math.exp(e)+Math.exp(-e))/2}function mn(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function vn(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function gn(e){return Math.log(e+Math.sqrt(e*e-1))}function $n(e){return Math.log((1+e)/(1-e))/2}function yn(e){return Math.log(e)*Math.LOG10E}function bn(e){return-e}function xn(e){return!e}function wn(e){return e<0?Math.ceil(e):Math.floor(e)}function kn(e){return Math.random()*(e||1)}function _n(e){return Sn(e+1)}Jt.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(Rt,Yt);){var t=this.current;this.parseFactor(e),e.push(wt(t.value))}},Jt.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(Rt,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Ft&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===Ut||this.nextToken.type===Lt||this.nextToken.type===Dt||this.nextToken.type===Ft&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(xt(n.value))}else this.parseExponential(e)},Jt.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(Rt,"^");)this.parseFactor(e),e.push(wt("^"))},Jt.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(Rt,"!");)e.push(xt("!"))},Jt.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(Rt,(function(e){return e.value in t}))){var n=this.current;this.parseAtom(e),e.push(xt(n.value))}else for(this.parseMemberExpression(e);this.accept(Ft,"(");)if(this.accept(Ft,")"))e.push(new bt(ht,0));else{var r=this.parseArgumentList(e);e.push(new bt(ht,r))}},Jt.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Ft,")");)for(this.parseExpression(e),++t;this.accept(Lt);)this.parseExpression(e),++t;return t},Jt.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(Rt,".")||this.accept(Bt,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(Wt),e.push(new bt(gt,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(Bt,"]"),e.push(wt("["))}}};var En=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Sn(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var r=e-2,o=e-1;r>1;)o*=r,r--;return 0===o&&(o=1),o}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Sn(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,s=i*e,a=s*e,l=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*s)-571/(2488320*a)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,n=En[0];for(var c=1;c<En.length;++c)n+=En[c]/(e+c);return t=e+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function An(e){return Array.isArray(e)?e.length:String(e).length}function In(){for(var e=0,t=0,n=0;n<arguments.length;n++){var r,o=Math.abs(arguments[n]);t<o?(e=e*(r=t/o)*r+1,t=o):e+=o>0?(r=o/t)*r:o}return t===1/0?1/0:t*Math.sqrt(e)}function Cn(e,t,n){return e?t:n}function Nn(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function Tn(e,t,n){return n&&(n[e]=t),t}function Mn(e,t){return e[0|t]}function On(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function qn(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Dn(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,n){return e(t,n)}))}function Rn(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(t,n,r){return e(t,n,r)}),t)}function jn(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,n){return e(t,n)}))}function Pn(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Fn(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Bn(e){return(e>0)-(e<0)||+e}var Ln=1/3;function Wn(e){return e<0?-Math.pow(-e,Ln):Math.pow(e,Ln)}function Un(e){return Math.exp(e)-1}function zn(e){return Math.log(1+e)}function Hn(e){return Math.log(e)/Math.LN2}function Xn(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||hn,cosh:Math.cosh||dn,tanh:Math.tanh||mn,asinh:Math.asinh||vn,acosh:Math.acosh||gn,atanh:Math.atanh||$n,sqrt:Math.sqrt,cbrt:Math.cbrt||Wn,log:Math.log,log2:Math.log2||Hn,ln:Math.log,lg:Math.log10||yn,log10:Math.log10||yn,expm1:Math.expm1||Un,log1p:Math.log1p||zn,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||wn,"-":bn,"+":Number,exp:Math.exp,not:xn,length:An,"!":_n,sign:Math.sign||Bn},this.binaryOps={"+":Gt,"-":Qt,"*":Zt,"/":en,"%":tn,"^":Math.pow,"||":nn,"==":rn,"!=":on,">":sn,"<":an,">=":ln,"<=":cn,and:un,or:fn,in:pn,"=":Tn,"[":Mn},this.ternaryOps={"?":Cn},this.functions={random:kn,fac:_n,min:qn,max:On,hypot:Math.hypot||In,pyt:Math.hypot||In,pow:Math.pow,atan2:Math.atan2,if:Cn,gamma:Sn,roundTo:Nn,map:Dn,fold:Rn,filter:jn,indexOf:Pn,join:Fn},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Xn.prototype.parse=function(e){var t=[],n=new Jt(this,new Ht(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(Dt,"EOF"),new qt(t,this)},Xn.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Jn=new Xn;Xn.parse=function(e){return Jn.parse(e)},Xn.evaluate=function(e,t){return Jn.parse(e).evaluate(t)};var Kn,Vn,Yn,Gn,Qn,Zn,er={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Xn.prototype.isOperatorEnabled=function(e){var t=function(e){return er.hasOwnProperty(e)?er[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]},function(e){e[e.D4=0]="D4",e[e.D6=1]="D6",e[e.D8=2]="D8",e[e.D10=3]="D10",e[e.D12=4]="D12"}(Kn||(Kn={})),function(e){e[e.STR=0]="STR",e[e.DEX=1]="DEX",e[e.CON=2]="CON",e[e.INT=3]="INT",e[e.WIS=4]="WIS",e[e.CHA=5]="CHA"}(Vn||(Vn={})),function(e){e[e.None=0]="None",e[e.Proficient=1]="Proficient",e[e.Expertise=2]="Expertise",e[e.JackOfAllTrades=3]="JackOfAllTrades"}(Yn||(Yn={}));class tr{constructor(e="Unnamed Attack",t=Vn.STR,n=0,r=!0,o="20/60 feet",i="",s=Vn.STR,a=0,l=""){this.name=e,this.attackAbility=t,this.attackModifier=n,this.proficient=r,this.range=o,this.damageRoll=i,this.damageAbility=s,this.damageModifier=a,this.damageType=l}}!function(e){e[e.Item=0]="Item",e[e.Equipment=1]="Equipment"}(Gn||(Gn={}));class nr{constructor(e="Unnamed Item",t="",n=1,r=0,o=Gn.Item,i=!1){this.name=e,this.description=t,this.count=n,this.weight=r,this.type=o,this.isEquipped=i}}class rr{constructor(e="Unnamed Skill",t=Yn.Proficient,n=Vn.STR,r=0,o=""){this.name=e,this.proficient=t,this.ability=n,this.modifier=r,this.description=o}}!function(e){e[e.Language=0]="Language",e[e.Weapon=1]="Weapon",e[e.Armor=2]="Armor",e[e.Other=3]="Other"}(Qn||(Qn={}));class or{constructor(e=Qn.Language,t="",n=""){this.type=e,this.name=t,this.source=n}}class ir{constructor(e="Unnamed Feature",t="",n=""){this.name=e,this.source=t,this.description=n}}class sr{constructor(e="Unnamed Tracker",t=0,n=0){this.name=e,this.max=t,this.current=n}}class ar{constructor(e="Unnamed Effect",t="",n="",r="",o=[]){this.name=e,this.source=t,this.duration=n,this.description=r,this.modifiers=o}}class lr{constructor(e=Vn.STR,t=""){this.stat=e,this.expr=t}}!function(e){e[e.AC=6]="AC",e[e.SPEED=7]="SPEED"}(Zn||(Zn={}));class cr{constructor(){this.uid=((e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t})(9),this.name="Unnamed Character",this.playerClass="",this.level=1,this.background="",this.race="",this.alignment="",this.exp=0,this.abilityScores={[Vn.STR]:10,[Vn.DEX]:10,[Vn.CON]:10,[Vn.INT]:10,[Vn.WIS]:10,[Vn.CHA]:10},this.tools=[],this.proficiencies=[],this.inspiration=!1,this.proficiency=2,this.savingThrows={[Vn.STR]:!1,[Vn.DEX]:!1,[Vn.CON]:!1,[Vn.INT]:!1,[Vn.WIS]:!1,[Vn.CHA]:!1},this.skills={acrobatics:Yn.None,animalHandling:Yn.None,arcana:Yn.None,athletics:Yn.None,deception:Yn.None,history:Yn.None,insight:Yn.None,intimidation:Yn.None,investigation:Yn.None,medicine:Yn.None,nature:Yn.None,perception:Yn.None,performance:Yn.None,persuasion:Yn.None,religion:Yn.None,sleightOfHand:Yn.None,stealth:Yn.None,survival:Yn.None},this.armorClass=10,this.speed=30,this.hp={max:10,current:10,temp:0},this.hitDice={max:1,current:1,type:Kn.D6},this.deathSaves={success:0,failure:0},this.attacks=[],this.equipment=[],this.coin=0,this.traits="",this.ideals="",this.bonds="",this.flaws="",this.trackers=[new sr("Class Resource"),new sr("Other Resource")],this.features=[],this.effects=[]}}const ur={[Vn.STR]:"Strength",[Vn.DEX]:"Dexterity",[Vn.CON]:"Constitution",[Vn.INT]:"Intelligence",[Vn.WIS]:"Wisdom",[Vn.CHA]:"Charisma"};function fr(e,t,n){const r=e.slice();return r[1]=t[n],r}function pr(e){let t,n,r,o=e[1][0]+"",i=e[1].slice(1)+"";return{c(){t=w("span"),n=k(o),r=k(i),I(t,"class","ml-1 text-sm")},m(e,o){y(e,t,o),$(t,n),y(e,r,o)},p(e,t){1&t&&o!==(o=e[1][0]+"")&&N(n,o),1&t&&i!==(i=e[1].slice(1)+"")&&N(r,i)},d(e){e&&b(t),e&&b(r)}}}function hr(t){let n,r=t[0].split(" "),o=[];for(let e=0;e<r.length;e+=1)o[e]=pr(fr(t,r,e));return{c(){n=w("div");for(let e=0;e<o.length;e+=1)o[e].c();I(n,"class","text-dark mb-4 text-center uppercase font-medium text-xs")},m(e,t){y(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,[t]){if(1&t){let i;for(r=e[0].split(" "),i=0;i<r.length;i+=1){const s=fr(e,r,i);o[i]?o[i].p(s,t):(o[i]=pr(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(e){e&&b(n),x(o,e)}}}function dr(e,t,n){let{value:r}=t;return e.$$set=e=>{"value"in e&&n(0,r=e.value)},[r]}class mr extends ke{constructor(e){super(),we(this,e,dr,hr,s,{value:0})}}const vr=e=>({index:4&e}),gr=e=>({index:e[2]});function $r(e,t,n){const r=e.slice();return r[12]=t[n],r[14]=n,r}function yr(e){let t,n,r,o,i=e[12].name+"";function s(){return e[8](e[14])}return{c(){t=w("li"),n=k(i),I(t,"class","py-2 px-4 hover:bg-blue-100 cursor-pointer"),q(t,"bg-blue-50",e[2]===e[14])},m(e,i){y(e,t,i),$(t,n),r||(o=S(t,"click",s),r=!0)},p(r,o){e=r,1&o&&i!==(i=e[12].name+"")&&N(n,i),4&o&&q(t,"bg-blue-50",e[2]===e[14])},d(e){e&&b(t),r=!1,o()}}}function br(t){let n;return{c(){n=w("div"),n.textContent="Select an item to the right",I(n,"class","w-96 flex items-center justify-center")},m(e,t){y(e,n,t)},p:e,i:e,o:e,d(e){e&&b(n)}}}function xr(e){let t,n;const r=e[7].default,o=l(r,e,e[11],gr);return{c(){t=w("div"),o&&o.c(),I(t,"class",e[1])},m(e,r){y(e,t,r),o&&o.m(t,null),n=!0},p(e,i){o&&o.p&&(!n||2052&i)&&u(o,r,e,e[11],i,vr,gr),(!n||2&i)&&I(t,"class",e[1])},i(e){n||(fe(o,e),n=!0)},o(e){pe(o,e),n=!1},d(e){e&&b(t),o&&o.d(e)}}}function wr(e){let t,n,r,i,s,a,l,c,u,f,p,h,d,m,v,g=e[0],k=[];for(let t=0;t<g.length;t+=1)k[t]=yr($r(e,g,t));const E=[xr,br],A=[];function C(e,t){return e[2]>-1?0:1}return a=C(e),l=A[a]=E[a](e),{c(){t=w("div"),n=w("ul");for(let e=0;e<k.length;e+=1)k[e].c();r=_(),i=w("li"),i.textContent="+",s=_(),l.c(),c=_(),u=w("div"),f=w("button"),f.textContent="Remove",p=_(),h=w("button"),h.textContent="Close",I(i,"class","py-2 px-4 hover:bg-blue-100 text-center cursor-pointer"),I(n,"class","w-52"),I(t,"class","flex"),I(f,"class","py-2 px-4 hover:bg-blue-100 text-red-400 uppercase font-medium text-sm"),I(h,"class","text-primary-400 py-2 px-4 hover:bg-blue-100 uppercase font-medium text-sm"),I(u,"class","flex justify-between p-2")},m(o,l){y(o,t,l),$(t,n);for(let e=0;e<k.length;e+=1)k[e].m(n,null);$(n,r),$(n,i),$(t,s),A[a].m(t,null),y(o,c,l),y(o,u,l),$(u,f),$(u,p),$(u,h),d=!0,m||(v=[S(i,"click",e[4]),S(f,"click",e[5]),S(h,"click",e[9])],m=!0)},p(e,o){if(5&o){let t;for(g=e[0],t=0;t<g.length;t+=1){const i=$r(e,g,t);k[t]?k[t].p(i,o):(k[t]=yr(i),k[t].c(),k[t].m(n,r))}for(;t<k.length;t+=1)k[t].d(1);k.length=g.length}let i=a;a=C(e),a===i?A[a].p(e,o):(ce(),pe(A[i],1,1,(()=>{A[i]=null})),ue(),l=A[a],l?l.p(e,o):(l=A[a]=E[a](e),l.c()),fe(l,1),l.m(t,null))},i(e){d||(fe(l),d=!0)},o(e){pe(l),d=!1},d(e){e&&b(t),x(k,e),A[a].d(),e&&b(c),e&&b(u),m=!1,o(v)}}}function kr(e){let t,n;return t=new We({props:{$$slots:{default:[wr]},$$scope:{ctx:e}}}),t.$on("close",e[10]),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,[n]){const r={};2055&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function _r(e,t,n){let{$$slots:r={},$$scope:o}=t;const i=z();let{items:s}=t,{type:a}=t,{class:l=""}=t,c=s.length>0?0:-1;return e.$$set=e=>{"items"in e&&n(0,s=e.items),"type"in e&&n(6,a=e.type),"class"in e&&n(1,l=e.class),"$$scope"in e&&n(11,o=e.$$scope)},[s,l,c,i,function(){s.push(new a),n(2,c=s.length-1),n(0,s)},function(){s.splice(c,1),c>=s.length&&n(2,c=-1),n(0,s)},a,r,e=>n(2,c=e),()=>i("close"),function(t){H(e,t)},o]}class Er extends ke{constructor(e){super(),we(this,e,_r,kr,s,{items:0,type:6,class:1})}}function Sr(e){let t,n,r;return{c(){t=w("input"),I(t,"placeholder",e[3]),I(t,"class","caret-primary-500 pt-6 px-4 pb-2 w-full svelte-5vyxqs")},m(o,i){y(o,t,i),T(t,e[0]),n||(r=S(t,"input",e[7]),n=!0)},p(e,n){8&n&&I(t,"placeholder",e[3]),1&n&&t.value!==e[0]&&T(t,e[0])},d(e){e&&b(t),n=!1,r()}}}function Ar(e){let t,n,r;return{c(){t=w("textarea"),I(t,"class","caret-primary-500 mt-8 px-4 pb-2 w-full svelte-5vyxqs")},m(o,i){y(o,t,i),T(t,e[0]),n||(r=S(t,"input",e[6]),n=!0)},p(e,n){1&n&&T(t,e[0])},d(e){e&&b(t),n=!1,r()}}}function Ir(e){let t,n,r;return{c(){t=w("input"),I(t,"placeholder",e[3]),I(t,"type","number"),I(t,"class","caret-primary-500 pt-6 px-4 pb-2 w-full svelte-5vyxqs")},m(o,i){y(o,t,i),T(t,e[0]),n||(r=S(t,"input",e[5]),n=!0)},p(e,n){8&n&&I(t,"placeholder",e[3]),1&n&&C(t.value)!==e[0]&&T(t,e[0])},d(e){e&&b(t),n=!1,r()}}}function Cr(t){let n,r,o,i,s,a,l;function c(e,t){return"number"===e[2]?Ir:"textarea"===e[2]?Ar:Sr}let u=c(t),f=u(t);return{c(){n=w("label"),f.c(),r=_(),o=w("span"),i=k(t[1]),s=_(),a=w("div"),I(o,"class","top-4 left-4 color-gray-600 absolute block text-gray-600 pointer-events-none svelte-5vyxqs"),q(o,"hasValue",void 0!==t[0]&&""!==t[0]),I(a,"class","-bottom-0.5 h-0.5 absolute right-0 w-full bg-blue-500 svelte-5vyxqs"),I(n,"class",l=t[4]+" relative flex border-b border-gray-200")},m(e,t){y(e,n,t),f.m(n,null),$(n,r),$(n,o),$(o,i),$(n,s),$(n,a)},p(e,[t]){u===(u=c(e))&&f?f.p(e,t):(f.d(1),f=u(e),f&&(f.c(),f.m(n,r))),2&t&&N(i,e[1]),1&t&&q(o,"hasValue",void 0!==e[0]&&""!==e[0]),16&t&&l!==(l=e[4]+" relative flex border-b border-gray-200")&&I(n,"class",l)},i:e,o:e,d(e){e&&b(n),f.d()}}}function Nr(e,t,n){let{value:r}=t,{label:o}=t,{type:i="text"}=t,{placeholder:s=""}=t,{class:a=""}=t;return e.$$set=e=>{"value"in e&&n(0,r=e.value),"label"in e&&n(1,o=e.label),"type"in e&&n(2,i=e.type),"placeholder"in e&&n(3,s=e.placeholder),"class"in e&&n(4,a=e.class)},[r,o,i,s,a,function(){r=C(this.value),n(0,r)},function(){r=this.value,n(0,r)},function(){r=this.value,n(0,r)}]}class Tr extends ke{constructor(e){super(),we(this,e,Nr,Cr,s,{value:0,label:1,type:2,placeholder:3,class:4})}}function Mr(t){let n,r,o;return{c(){n=w("span"),n.textContent="settings",I(n,"class","material-icons right-2 top-2 absolute text-gray-400 text-base cursor-pointer")},m(e,i){y(e,n,i),r||(o=S(n,"click",t[1]),r=!0)},p:e,i:e,o:e,d(e){e&&b(n),r=!1,o()}}}function Or(e,t,n){let{value:r=!1}=t;return e.$$set=e=>{"value"in e&&n(0,r=e.value)},[r,()=>n(0,r=!0)]}class qr extends ke{constructor(e){super(),we(this,e,Or,Mr,s,{value:0})}}function Dr(e){let t,n,r,o,s,a,c,p=void 0!==e[1]&&jr(e);const h=e[7].default,d=l(h,e,e[6],null);return{c(){t=w("div"),p&&p.c(),n=_(),d&&d.c(),I(t,"class",r=e[0]+" paper block p-5"),I(t,"style",e[3])},m(r,i){y(r,t,i),p&&p.m(t,null),$(t,n),d&&d.m(t,null),s=!0,a||(c=f(o=je.call(null,t,e[4]==rt.FANCY)),a=!0)},p(e,a){void 0!==e[1]?p?(p.p(e,a),2&a&&fe(p,1)):(p=jr(e),p.c(),fe(p,1),p.m(t,n)):p&&(ce(),pe(p,1,1,(()=>{p=null})),ue()),d&&d.p&&(!s||64&a)&&u(d,h,e,e[6],a,null,null),(!s||1&a&&r!==(r=e[0]+" paper block p-5"))&&I(t,"class",r),(!s||8&a)&&I(t,"style",e[3]),o&&i(o.update)&&16&a&&o.update.call(null,e[4]==rt.FANCY)},i(e){s||(fe(p),fe(d,e),s=!0)},o(e){pe(p),pe(d,e),s=!1},d(e){e&&b(t),p&&p.d(),d&&d.d(e),a=!1,c()}}}function Rr(e){let t,n,r,o,s,a,c,p=void 0!==e[1]&&Pr(e);const h=e[7].default,d=l(h,e,e[6],null);return{c(){t=w("label"),p&&p.c(),n=_(),d&&d.c(),I(t,"class",r=e[0]+" paper p-5"),I(t,"style",e[3])},m(r,i){y(r,t,i),p&&p.m(t,null),$(t,n),d&&d.m(t,null),s=!0,a||(c=f(o=je.call(null,t,e[4]==rt.FANCY)),a=!0)},p(e,a){void 0!==e[1]?p?(p.p(e,a),2&a&&fe(p,1)):(p=Pr(e),p.c(),fe(p,1),p.m(t,n)):p&&(ce(),pe(p,1,1,(()=>{p=null})),ue()),d&&d.p&&(!s||64&a)&&u(d,h,e,e[6],a,null,null),(!s||1&a&&r!==(r=e[0]+" paper p-5"))&&I(t,"class",r),(!s||8&a)&&I(t,"style",e[3]),o&&i(o.update)&&16&a&&o.update.call(null,e[4]==rt.FANCY)},i(e){s||(fe(p),fe(d,e),s=!0)},o(e){pe(p),pe(d,e),s=!1},d(e){e&&b(t),p&&p.d(),d&&d.d(e),a=!1,c()}}}function jr(e){let t,n;return t=new mr({props:{value:e[1]}}),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.value=e[1]),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Pr(e){let t,n;return t=new mr({props:{value:e[1]}}),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.value=e[1]),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Fr(e){let t,n,r,o;const i=[Rr,Dr],s=[];function a(e,t){return e[2]?0:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),r=E()},m(e,n){s[t].m(e,n),y(e,r,n),o=!0},p(e,[o]){let l=t;t=a(e),t===l?s[t].p(e,o):(ce(),pe(s[l],1,1,(()=>{s[l]=null})),ue(),n=s[t],n?n.p(e,o):(n=s[t]=i[t](e),n.c()),fe(n,1),n.m(r.parentNode,r))},i(e){o||(fe(n),o=!0)},o(e){pe(n),o=!1},d(e){s[t].d(e),e&&b(r)}}}function Br(e,t,n){let r,o;a(e,ot,(e=>n(4,o=e)));let{$$slots:i={},$$scope:s}=t,{class:l=""}=t,{area:c}=t,{title:u}=t,{label:f=!1}=t;return e.$$set=e=>{"class"in e&&n(0,l=e.class),"area"in e&&n(5,c=e.area),"title"in e&&n(1,u=e.title),"label"in e&&n(2,f=e.label),"$$scope"in e&&n(6,s=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&n(3,r=void 0!==c?"grid-area:"+c:void 0)},[l,u,f,r,o,c,s,i]}class Lr extends ke{constructor(e){super(),we(this,e,Br,Fr,s,{class:0,area:5,title:1,label:2})}}function Wr(e,t,n){const r=e.slice();return r[16]=t[n],r[18]=n,r}function Ur(e){let t,n,r;function o(t){e[14](t)}let i={type:tr,$$slots:{default:[zr,({index:e})=>({19:e}),({index:e})=>e?524288:0]},$$scope:{ctx:e}};return void 0!==e[0].attacks&&(i.items=e[0].attacks),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[3]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};1572865&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.items=e[0].attacks,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function zr(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v,g,x,E,S,A,C,N,T,M,O,q,D,R,j,P,F,B,L;function W(t){e[5](t,e[19])}let U={label:"Name"};function z(t){e[6](t,e[19])}void 0!==e[0].attacks[e[19]].name&&(U.value=e[0].attacks[e[19]].name),t=new Tr({props:U}),J.push((()=>ge(t,"value",W)));let H={label:"Ability",items:e[4]};function X(t){e[7](t,e[19])}void 0!==e[0].attacks[e[19]].attackAbility&&(H.value=e[0].attacks[e[19]].attackAbility),a=new Ge({props:H}),J.push((()=>ge(a,"value",z)));let K={class:"w-20",type:"number",label:"Modifier"};function V(t){e[8](t,e[19])}void 0!==e[0].attacks[e[19]].attackModifier&&(K.value=e[0].attacks[e[19]].attackModifier),u=new Tr({props:K}),J.push((()=>ge(u,"value",X)));let Y={label:"Proficient"};function G(t){e[9](t,e[19])}void 0!==e[0].attacks[e[19]].proficient&&(Y.value=e[0].attacks[e[19]].proficient),h=new et({props:Y}),J.push((()=>ge(h,"value",V)));let Q={class:"w-20",label:"Dice",placeholder:"2d6"};function ee(t){e[10](t,e[19])}void 0!==e[0].attacks[e[19]].damageRoll&&(Q.value=e[0].attacks[e[19]].damageRoll),E=new Tr({props:Q}),J.push((()=>ge(E,"value",G)));let te={label:"Ability",items:e[4]};function ne(t){e[11](t,e[19])}void 0!==e[0].attacks[e[19]].damageAbility&&(te.value=e[0].attacks[e[19]].damageAbility),C=new Ge({props:te}),J.push((()=>ge(C,"value",ee)));let re={class:"w-20",type:"number",label:"Modifier"};function oe(t){e[12](t,e[19])}void 0!==e[0].attacks[e[19]].damageModifier&&(re.value=e[0].attacks[e[19]].damageModifier),M=new Tr({props:re}),J.push((()=>ge(M,"value",ne)));let ie={class:"flex-1 w-0",label:"Type",placeholder:"Slashing"};function se(t){e[13](t,e[19])}void 0!==e[0].attacks[e[19]].damageType&&(ie.value=e[0].attacks[e[19]].damageType),R=new Tr({props:ie}),J.push((()=>ge(R,"value",oe)));let ae={class:"flex-1 w-0",label:"Range"};return void 0!==e[0].attacks[e[19]].range&&(ae.value=e[0].attacks[e[19]].range),F=new Tr({props:ae}),J.push((()=>ge(F,"value",se))),{c(){$e(t.$$.fragment),r=_(),o=w("div"),o.textContent="Attack Roll",i=_(),s=w("div"),$e(a.$$.fragment),c=k("\n      +\n      "),$e(u.$$.fragment),p=k("\n      +\n      "),$e(h.$$.fragment),m=_(),v=w("div"),v.textContent="Damage",g=_(),x=w("div"),$e(E.$$.fragment),A=k("\n      +\n      "),$e(C.$$.fragment),T=k("\n      +\n      "),$e(M.$$.fragment),q=_(),D=w("div"),$e(R.$$.fragment),P=_(),$e(F.$$.fragment),I(o,"class","mt-6"),I(s,"class","gap-2 flex items-center mb-2"),I(v,"class","mt-6"),I(x,"class","gap-2 flex items-center mb-2"),I(D,"class","gap-2 flex")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),y(e,i,n),y(e,s,n),ye(a,s,null),$(s,c),ye(u,s,null),$(s,p),ye(h,s,null),y(e,m,n),y(e,v,n),y(e,g,n),y(e,x,n),ye(E,x,null),$(x,A),ye(C,x,null),$(x,T),ye(M,x,null),y(e,q,n),y(e,D,n),ye(R,D,null),$(D,P),ye(F,D,null),L=!0},p(r,o){e=r;const i={};!n&&524289&o&&(n=!0,i.value=e[0].attacks[e[19]].name,Z((()=>n=!1))),t.$set(i);const s={};!l&&524289&o&&(l=!0,s.value=e[0].attacks[e[19]].attackAbility,Z((()=>l=!1))),a.$set(s);const c={};!f&&524289&o&&(f=!0,c.value=e[0].attacks[e[19]].attackModifier,Z((()=>f=!1))),u.$set(c);const p={};!d&&524289&o&&(d=!0,p.value=e[0].attacks[e[19]].proficient,Z((()=>d=!1))),h.$set(p);const m={};!S&&524289&o&&(S=!0,m.value=e[0].attacks[e[19]].damageRoll,Z((()=>S=!1))),E.$set(m);const v={};!N&&524289&o&&(N=!0,v.value=e[0].attacks[e[19]].damageAbility,Z((()=>N=!1))),C.$set(v);const g={};!O&&524289&o&&(O=!0,g.value=e[0].attacks[e[19]].damageModifier,Z((()=>O=!1))),M.$set(g);const $={};!j&&524289&o&&(j=!0,$.value=e[0].attacks[e[19]].damageType,Z((()=>j=!1))),R.$set($);const y={};!B&&524289&o&&(B=!0,y.value=e[0].attacks[e[19]].range,Z((()=>B=!1))),F.$set(y)},i(e){L||(fe(t.$$.fragment,e),fe(a.$$.fragment,e),fe(u.$$.fragment,e),fe(h.$$.fragment,e),fe(E.$$.fragment,e),fe(C.$$.fragment,e),fe(M.$$.fragment,e),fe(R.$$.fragment,e),fe(F.$$.fragment,e),L=!0)},o(e){pe(t.$$.fragment,e),pe(a.$$.fragment,e),pe(u.$$.fragment,e),pe(h.$$.fragment,e),pe(E.$$.fragment,e),pe(C.$$.fragment,e),pe(M.$$.fragment,e),pe(R.$$.fragment,e),pe(F.$$.fragment,e),L=!1},d(e){be(t,e),e&&b(r),e&&b(o),e&&b(i),e&&b(s),be(a),be(u),be(h),e&&b(m),e&&b(v),e&&b(g),e&&b(x),be(E),be(C),be(M),e&&b(q),e&&b(D),be(R),be(F)}}}function Hr(e){let t,n,r,o,i,s,a,l,c,u,f,p=e[16].name+"",h=e[1].attacks[e[18]].attackModifier+"",d=e[1].attacks[e[18]].fullDamageRoll+"",m=e[16].damageType+"";return{c(){t=w("span"),n=k(p),r=_(),o=w("span"),i=k(h),s=_(),a=w("span"),l=k(d),c=_(),u=k(m),f=_()},m(e,p){y(e,t,p),$(t,n),y(e,r,p),y(e,o,p),$(o,i),y(e,s,p),y(e,a,p),$(a,l),$(a,c),$(a,u),$(a,f)},p(e,t){1&t&&p!==(p=e[16].name+"")&&N(n,p),2&t&&h!==(h=e[1].attacks[e[18]].attackModifier+"")&&N(i,h),2&t&&d!==(d=e[1].attacks[e[18]].fullDamageRoll+"")&&N(l,d),1&t&&m!==(m=e[16].damageType+"")&&N(u,m)},d(e){e&&b(t),e&&b(r),e&&b(o),e&&b(s),e&&b(a)}}}function Xr(e){let t,n,r,o,i,s,a,l,c;function u(t){e[15](t)}let f={};void 0!==e[2]&&(f.value=e[2]),t=new qr({props:f}),J.push((()=>ge(t,"value",u)));let p=e[0].attacks,h=[];for(let t=0;t<p.length;t+=1)h[t]=Hr(Wr(e,p,t));return{c(){$e(t.$$.fragment),r=_(),o=w("div"),i=w("span"),i.textContent="Name",s=w("span"),s.textContent="Atk",a=w("span"),a.textContent="Damage",l=_();for(let e=0;e<h.length;e+=1)h[e].c();I(i,"class","header"),I(s,"class","header"),I(a,"class","header"),I(o,"class","table svelte-1f16o3y")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),$(o,i),$(o,s),$(o,a),$(o,l);for(let e=0;e<h.length;e+=1)h[e].m(o,null);c=!0},p(e,r){const i={};if(!n&&4&r&&(n=!0,i.value=e[2],Z((()=>n=!1))),t.$set(i),3&r){let t;for(p=e[0].attacks,t=0;t<p.length;t+=1){const n=Wr(e,p,t);h[t]?h[t].p(n,r):(h[t]=Hr(n),h[t].c(),h[t].m(o,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=p.length}},i(e){c||(fe(t.$$.fragment,e),c=!0)},o(e){pe(t.$$.fragment,e),c=!1},d(e){be(t,e),e&&b(r),e&&b(o),x(h,e)}}}function Jr(e){let t,n,r,o=e[2]&&Ur(e);return n=new Lr({props:{class:"relative",area:"atk",title:"Attacks",$$slots:{default:[Xr]},$$scope:{ctx:e}}}),{c(){o&&o.c(),t=_(),$e(n.$$.fragment)},m(e,i){o&&o.m(e,i),y(e,t,i),ye(n,e,i),r=!0},p(e,[r]){e[2]?o?(o.p(e,r),4&r&&fe(o,1)):(o=Ur(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue());const i={};1048583&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(fe(o),fe(n.$$.fragment,e),r=!0)},o(e){pe(o),pe(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&b(t),be(n,e)}}}function Kr(e,t,n){let{data:r}=t,{derived:o}=t,i=!1;const s=De(Vn);return e.$$set=e=>{"data"in e&&n(0,r=e.data),"derived"in e&&n(1,o=e.derived)},[r,o,i,function(){n(0,r),n(2,i=!1)},s,function(t,o){e.$$.not_equal(r.attacks[o].name,t)&&(r.attacks[o].name=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].attackAbility,t)&&(r.attacks[o].attackAbility=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].attackModifier,t)&&(r.attacks[o].attackModifier=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].proficient,t)&&(r.attacks[o].proficient=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].damageRoll,t)&&(r.attacks[o].damageRoll=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].damageAbility,t)&&(r.attacks[o].damageAbility=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].damageModifier,t)&&(r.attacks[o].damageModifier=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].damageType,t)&&(r.attacks[o].damageType=t,n(0,r))},function(t,o){e.$$.not_equal(r.attacks[o].range,t)&&(r.attacks[o].range=t,n(0,r))},function(t){e.$$.not_equal(r.attacks,t)&&(r.attacks=t,n(0,r))},function(e){i=e,n(2,i)}]}class Vr extends ke{constructor(e){super(),we(this,e,Kr,Jr,s,{data:0,derived:1})}}function Yr(e,t,n){const r=e.slice();return r[5]=t[n],r[6]=t,r[7]=n,r}function Gr(e){let t,n,r,i,s,a,l,c,u,f;function p(){e[2].call(r,e[6],e[7])}function h(){e[3].call(s,e[6],e[7])}function d(){e[4].call(l,e[6],e[7])}return{c(){t=w("div"),n=k("Total\n        "),r=w("input"),i=_(),s=w("input"),a=_(),l=w("input"),c=_(),I(r,"class","overflow-hidden flex-1 ml-2 border-b border-gray-200 text-center"),I(r,"type","number"),I(t,"class","flex"),I(s,"class","w-full text-center text-3xl"),I(s,"type","number"),I(l,"class","w-full text-center")},m(o,m){y(o,t,m),$(t,n),$(t,r),T(r,e[5].max),y(o,i,m),y(o,s,m),T(s,e[5].current),y(o,a,m),y(o,l,m),T(l,e[5].name),y(o,c,m),u||(f=[S(r,"input",p),S(s,"input",h),S(l,"input",d)],u=!0)},p(t,n){e=t,1&n&&C(r.value)!==e[5].max&&T(r,e[5].max),1&n&&C(s.value)!==e[5].current&&T(s,e[5].current),1&n&&l.value!==e[5].name&&T(l,e[5].name)},d(e){e&&b(t),e&&b(i),e&&b(s),e&&b(a),e&&b(l),e&&b(c),u=!1,o(f)}}}function Qr(e){let t,n;return t=new Lr({props:{$$slots:{default:[Gr]},$$scope:{ctx:e}}}),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};257&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Zr(e){let t,n,r,o,i,s,a=e[0].trackers,l=[];for(let t=0;t<a.length;t+=1)l[t]=Qr(Yr(e,a,t));const c=e=>pe(l[e],1,1,(()=>{l[e]=null}));return{c(){t=w("div");for(let e=0;e<l.length;e+=1)l[e].c();n=_(),r=w("button"),r.textContent="+",I(t,"class","grid grid-cols-2 gap-4 mb-4"),I(r,"class","mb-4 w-full")},m(a,c){y(a,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);y(a,n,c),y(a,r,c),o=!0,i||(s=S(r,"click",e[1]),i=!0)},p(e,[n]){if(1&n){let r;for(a=e[0].trackers,r=0;r<a.length;r+=1){const o=Yr(e,a,r);l[r]?(l[r].p(o,n),fe(l[r],1)):(l[r]=Qr(o),l[r].c(),fe(l[r],1),l[r].m(t,null))}for(ce(),r=a.length;r<l.length;r+=1)c(r);ue()}},i(e){if(!o){for(let e=0;e<a.length;e+=1)fe(l[e]);o=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)pe(l[e]);o=!1},d(e){e&&b(t),x(l,e),e&&b(n),e&&b(r),i=!1,s()}}}function eo(e,t,n){let{data:r}=t;return e.$$set=e=>{"data"in e&&n(0,r=e.data)},[r,function(){r.trackers.push(new sr("Other Resource")),n(0,r)},function(e,t){e[t].max=C(this.value),n(0,r)},function(e,t){e[t].current=C(this.value),n(0,r)},function(e,t){e[t].name=this.value,n(0,r)}]}class to extends ke{constructor(e){super(),we(this,e,eo,Zr,s,{data:0})}}function no(e){let t,n,r,o;return{c(){t=w("p"),n=k(e[2]),I(t,"class","pb-4 whitespace-pre-wrap text-sm")},m(e,r){y(e,t,r),$(t,n),o=!0},p(e,t){(!o||4&t)&&N(n,e[2])},i(e){o||(Q((()=>{r||(r=ve(t,Me,{duration:200},!0)),r.run(1)})),o=!0)},o(e){r||(r=ve(t,Me,{duration:200},!1)),r.run(0),o=!1},d(e){e&&b(t),e&&r&&r.end()}}}function ro(e){let t,n,r,o,i,s,a,l,c,u,f=e[3]&&no(e);return{c(){t=w("div"),n=w("div"),r=k(e[0]),o=_(),i=w("div"),s=k(e[1]),a=_(),f&&f.c(),I(i,"class","text-light text-xs"),I(n,"class","header py-3 svelte-1p65ek4"),q(n,"py-5",e[3]),I(t,"class","accordion svelte-1p65ek4"),q(t,"my-4",e[3])},m(p,h){y(p,t,h),$(t,n),$(n,r),$(n,o),$(n,i),$(i,s),$(t,a),f&&f.m(t,null),l=!0,c||(u=S(t,"click",e[4]),c=!0)},p(e,[o]){(!l||1&o)&&N(r,e[0]),(!l||2&o)&&N(s,e[1]),8&o&&q(n,"py-5",e[3]),e[3]?f?(f.p(e,o),8&o&&fe(f,1)):(f=no(e),f.c(),fe(f,1),f.m(t,null)):f&&(ce(),pe(f,1,1,(()=>{f=null})),ue()),8&o&&q(t,"my-4",e[3])},i(e){l||(fe(f),l=!0)},o(e){pe(f),l=!1},d(e){e&&b(t),f&&f.d(),c=!1,u()}}}function oo(e,t,n){let{title:r}=t,{subtitle:o}=t,{content:i}=t,{expanded:s=!1}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"subtitle"in e&&n(1,o=e.subtitle),"content"in e&&n(2,i=e.content),"expanded"in e&&n(3,s=e.expanded)},[r,o,i,s,function(t){H(e,t)}]}class io extends ke{constructor(e){super(),we(this,e,oo,ro,s,{title:0,subtitle:1,content:2,expanded:3})}}function so(e,t,n){const r=e.slice();return r[10]=t[n],r}function ao(e){let t,n,r;function o(t){e[7](t)}let i={type:ir,$$slots:{default:[lo,({index:e})=>({13:e}),({index:e})=>e?8192:0]},$$scope:{ctx:e}};return void 0!==e[0].features&&(i.items=e[0].features),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[3]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};24577&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.items=e[0].features,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function lo(e){let t,n,r,o,i,s,a,l,c;function u(t){e[4](t,e[13])}let f={label:"Name"};function p(t){e[5](t,e[13])}void 0!==e[0].features[e[13]].name&&(f.value=e[0].features[e[13]].name),t=new Tr({props:f}),J.push((()=>ge(t,"value",u)));let h={label:"Source"};function d(t){e[6](t,e[13])}void 0!==e[0].features[e[13]].source&&(h.value=e[0].features[e[13]].source),o=new Tr({props:h}),J.push((()=>ge(o,"value",p)));let m={label:"Description",type:"textarea",class:"h-72 w-96"};return void 0!==e[0].features[e[13]].description&&(m.value=e[0].features[e[13]].description),a=new Tr({props:m}),J.push((()=>ge(a,"value",d))),{c(){$e(t.$$.fragment),r=_(),$e(o.$$.fragment),s=_(),$e(a.$$.fragment)},m(e,n){ye(t,e,n),y(e,r,n),ye(o,e,n),y(e,s,n),ye(a,e,n),c=!0},p(r,s){e=r;const c={};!n&&8193&s&&(n=!0,c.value=e[0].features[e[13]].name,Z((()=>n=!1))),t.$set(c);const u={};!i&&8193&s&&(i=!0,u.value=e[0].features[e[13]].source,Z((()=>i=!1))),o.$set(u);const f={};!l&&8193&s&&(l=!0,f.value=e[0].features[e[13]].description,Z((()=>l=!1))),a.$set(f)},i(e){c||(fe(t.$$.fragment,e),fe(o.$$.fragment,e),fe(a.$$.fragment,e),c=!0)},o(e){pe(t.$$.fragment,e),pe(o.$$.fragment,e),pe(a.$$.fragment,e),c=!1},d(e){be(t,e),e&&b(r),be(o,e),e&&b(s),be(a,e)}}}function co(e){let t,n;return t=new io({props:{title:e[10].name,subtitle:e[10].source,content:e[10].description,expanded:e[2]===e[10]}}),t.$on("click",(function(){return e[9](e[10])})),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(n,r){e=n;const o={};1&r&&(o.title=e[10].name),1&r&&(o.subtitle=e[10].source),1&r&&(o.content=e[10].description),5&r&&(o.expanded=e[2]===e[10]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function uo(e){let t,n,r,o,i,s,a,l,c,u=e[1]&&ao(e);function f(t){e[8](t)}let p={};void 0!==e[1]&&(p.value=e[1]),r=new qr({props:p}),J.push((()=>ge(r,"value",f))),a=new mr({props:{value:"Features & Traits"}});let h=e[0].features,d=[];for(let t=0;t<h.length;t+=1)d[t]=co(so(e,h,t));const m=e=>pe(d[e],1,1,(()=>{d[e]=null}));return{c(){u&&u.c(),t=_(),n=w("div"),$e(r.$$.fragment),i=_(),s=w("div"),$e(a.$$.fragment),l=_();for(let e=0;e<d.length;e+=1)d[e].c();I(s,"class","accordion pt-6 px-6 pb-2 rounded-t"),I(n,"class","relative")},m(e,o){u&&u.m(e,o),y(e,t,o),y(e,n,o),ye(r,n,null),$(n,i),$(n,s),ye(a,s,null),$(n,l);for(let e=0;e<d.length;e+=1)d[e].m(n,null);c=!0},p(e,[i]){e[1]?u?(u.p(e,i),2&i&&fe(u,1)):(u=ao(e),u.c(),fe(u,1),u.m(t.parentNode,t)):u&&(ce(),pe(u,1,1,(()=>{u=null})),ue());const s={};if(!o&&2&i&&(o=!0,s.value=e[1],Z((()=>o=!1))),r.$set(s),5&i){let t;for(h=e[0].features,t=0;t<h.length;t+=1){const r=so(e,h,t);d[t]?(d[t].p(r,i),fe(d[t],1)):(d[t]=co(r),d[t].c(),fe(d[t],1),d[t].m(n,null))}for(ce(),t=h.length;t<d.length;t+=1)m(t);ue()}},i(e){if(!c){fe(u),fe(r.$$.fragment,e),fe(a.$$.fragment,e);for(let e=0;e<h.length;e+=1)fe(d[e]);c=!0}},o(e){pe(u),pe(r.$$.fragment,e),pe(a.$$.fragment,e),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)pe(d[e]);c=!1},d(e){u&&u.d(e),e&&b(t),e&&b(n),be(r),be(a),x(d,e)}}}function fo(e,t,n){let r,{data:o}=t,i=!1;return e.$$set=e=>{"data"in e&&n(0,o=e.data)},[o,i,r,function(){n(0,o),n(1,i=!1)},function(t,r){e.$$.not_equal(o.features[r].name,t)&&(o.features[r].name=t,n(0,o))},function(t,r){e.$$.not_equal(o.features[r].source,t)&&(o.features[r].source=t,n(0,o))},function(t,r){e.$$.not_equal(o.features[r].description,t)&&(o.features[r].description=t,n(0,o))},function(t){e.$$.not_equal(o.features,t)&&(o.features=t,n(0,o))},function(e){i=e,n(1,i)},e=>n(2,r=r===e?void 0:e)]}class po extends ke{constructor(e){super(),we(this,e,fo,uo,s,{data:0})}}function ho(e,t,n){const r=e.slice();return r[26]=t[n],r}function mo(e,t,n){const r=e.slice();return r[26]=t[n],r}function vo(e){let t,n,r;function o(t){e[17](t)}let i={type:nr,$$slots:{default:[go,({index:e})=>({31:e}),({index:e})=>[0,e?1:0]]},$$scope:{ctx:e}};return void 0!==e[0].equipment&&(i.items=e[0].equipment),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[8]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};1&r[0]|3&r[1]&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r[0]&&(n=!0,o.items=e[0].equipment,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function go(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v,g,x,k;function E(t){e[11](t,e[31])}let S={label:"name"};function A(t){e[12](t,e[31])}void 0!==e[0].equipment[e[31]].name&&(S.value=e[0].equipment[e[31]].name),t=new Tr({props:S}),J.push((()=>ge(t,"value",E)));let C={class:"w-16",label:"Count",type:"number"};function N(t){e[13](t,e[31])}void 0!==e[0].equipment[e[31]].count&&(C.value=e[0].equipment[e[31]].count),i=new Tr({props:C}),J.push((()=>ge(i,"value",A)));let T={class:"w-16",label:"Weight",type:"number"};function M(t){e[14](t,e[31])}void 0!==e[0].equipment[e[31]].weight&&(T.value=e[0].equipment[e[31]].weight),l=new Tr({props:T}),J.push((()=>ge(l,"value",N)));let O={label:"Type",items:e[9]};function q(t){e[15](t,e[31])}void 0!==e[0].equipment[e[31]].type&&(O.value=e[0].equipment[e[31]].type),f=new Ge({props:O}),J.push((()=>ge(f,"value",M)));let D={label:"Equiped",disabled:e[0].equipment[e[31]].type!==Gn.Equipment};function R(t){e[16](t,e[31])}void 0!==e[0].equipment[e[31]].isEquipped&&(D.value=e[0].equipment[e[31]].isEquipped),d=new et({props:D}),J.push((()=>ge(d,"value",q)));let j={class:"h-72 w-96",label:"description",type:"textarea"};return void 0!==e[0].equipment[e[31]].description&&(j.value=e[0].equipment[e[31]].description),g=new Tr({props:j}),J.push((()=>ge(g,"value",R))),{c(){$e(t.$$.fragment),r=_(),o=w("div"),$e(i.$$.fragment),a=_(),$e(l.$$.fragment),u=_(),$e(f.$$.fragment),h=_(),$e(d.$$.fragment),v=_(),$e(g.$$.fragment),I(o,"class","gap-2 flex my-4")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),ye(i,o,null),$(o,a),ye(l,o,null),$(o,u),ye(f,o,null),$(o,h),ye(d,o,null),y(e,v,n),ye(g,e,n),k=!0},p(r,o){e=r;const a={};!n&&1&o[0]|1&o[1]&&(n=!0,a.value=e[0].equipment[e[31]].name,Z((()=>n=!1))),t.$set(a);const u={};!s&&1&o[0]|1&o[1]&&(s=!0,u.value=e[0].equipment[e[31]].count,Z((()=>s=!1))),i.$set(u);const h={};!c&&1&o[0]|1&o[1]&&(c=!0,h.value=e[0].equipment[e[31]].weight,Z((()=>c=!1))),l.$set(h);const v={};!p&&1&o[0]|1&o[1]&&(p=!0,v.value=e[0].equipment[e[31]].type,Z((()=>p=!1))),f.$set(v);const $={};1&o[0]|1&o[1]&&($.disabled=e[0].equipment[e[31]].type!==Gn.Equipment),!m&&1&o[0]|1&o[1]&&(m=!0,$.value=e[0].equipment[e[31]].isEquipped,Z((()=>m=!1))),d.$set($);const y={};!x&&1&o[0]|1&o[1]&&(x=!0,y.value=e[0].equipment[e[31]].description,Z((()=>x=!1))),g.$set(y)},i(e){k||(fe(t.$$.fragment,e),fe(i.$$.fragment,e),fe(l.$$.fragment,e),fe(f.$$.fragment,e),fe(d.$$.fragment,e),fe(g.$$.fragment,e),k=!0)},o(e){pe(t.$$.fragment,e),pe(i.$$.fragment,e),pe(l.$$.fragment,e),pe(f.$$.fragment,e),pe(d.$$.fragment,e),pe(g.$$.fragment,e),k=!1},d(e){be(t,e),e&&b(r),e&&b(o),be(i),be(l),be(f),be(d),e&&b(v),be(g,e)}}}function $o(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m=e[26].count+"",v=e[26].name+"",g=e[26].weight+"",x=e[26].description+"";return{c(){t=w("label"),n=w("span"),r=k(m),o=_(),i=w("span"),s=k(v),a=_(),l=w("span"),c=k(g),u=_(),f=w("input"),p=_(),h=w("p"),d=k(x),I(n,"class","svelte-svvyjd"),I(i,"class","svelte-svvyjd"),I(l,"class","svelte-svvyjd"),I(f,"class","hidden svelte-svvyjd"),I(f,"type","checkbox"),I(h,"class","col-span-3 mb-4 text-sm svelte-svvyjd"),I(t,"class","contents svelte-svvyjd"),q(t,"unequiped",!e[26].isEquipped)},m(e,m){y(e,t,m),$(t,n),$(n,r),$(t,o),$(t,i),$(i,s),$(t,a),$(t,l),$(l,c),$(t,u),$(t,f),$(t,p),$(t,h),$(h,d)},p(e,n){1&n[0]&&m!==(m=e[26].count+"")&&N(r,m),1&n[0]&&v!==(v=e[26].name+"")&&N(s,v),1&n[0]&&g!==(g=e[26].weight+"")&&N(c,g),1&n[0]&&x!==(x=e[26].description+"")&&N(d,x),1&n[0]&&q(t,"unequiped",!e[26].isEquipped)},d(e){e&&b(t)}}}function yo(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v=e[26].count+"",g=e[26].name+"",x=e[26].weight+"",E=e[26].description+"";return{c(){t=w("label"),n=w("span"),r=k(v),o=_(),i=w("span"),s=k(g),a=_(),l=w("span"),c=k(x),u=_(),f=w("input"),p=_(),h=w("p"),d=k(E),m=_(),I(f,"class","hidden svelte-svvyjd"),I(f,"type","checkbox"),I(h,"class","col-span-3 mb-4 text-sm svelte-svvyjd"),I(t,"class","contents")},m(e,v){y(e,t,v),$(t,n),$(n,r),$(t,o),$(t,i),$(i,s),$(t,a),$(t,l),$(l,c),$(t,u),$(t,f),$(t,p),$(t,h),$(h,d),$(t,m)},p(e,t){1&t[0]&&v!==(v=e[26].count+"")&&N(r,v),1&t[0]&&g!==(g=e[26].name+"")&&N(s,g),1&t[0]&&x!==(x=e[26].weight+"")&&N(c,x),1&t[0]&&E!==(E=e[26].description+"")&&N(d,E)},d(e){e&&b(t)}}}function bo(e){let t,n,r,i,s,a,l,c,u,f,p,h,d,m,v,g,E,A,M,O,q,D,R,j,P,F,B,L,W,U,z,H,X,K,V,Y,G,Q,ee,te,ne,re,oe,ie,se,ae,le,ce=e[1].totalWeight+"";function ue(t){e[18](t)}let he={};void 0!==e[7]&&(he.value=e[7]),t=new qr({props:he}),J.push((()=>ge(t,"value",ue)));let de=e[0].equipment.filter(e[24]),me=[];for(let t=0;t<de.length;t+=1)me[t]=$o(mo(e,de,t));let ve=e[0].equipment.filter(e[25]),xe=[];for(let t=0;t<ve.length;t+=1)xe[t]=yo(ho(e,ve,t));return{c(){$e(t.$$.fragment),r=_(),i=w("div"),s=w("img"),l=_(),c=w("label"),u=w("span"),u.textContent="CP",f=_(),p=w("input"),h=_(),d=w("label"),m=w("span"),m.textContent="SP",v=_(),g=w("input"),E=_(),A=w("label"),M=w("span"),M.textContent="EP",O=_(),q=w("input"),D=_(),R=w("label"),j=w("span"),j.textContent="GP",P=_(),F=w("input"),B=_(),L=w("label"),W=w("span"),W.textContent="PP",U=_(),z=w("input"),H=_(),X=w("div"),K=w("span"),K.textContent="Count",V=w("span"),V.textContent="Name",Y=w("span"),Y.textContent="Weight",G=_();for(let e=0;e<me.length;e+=1)me[e].c();Q=_();for(let e=0;e<xe.length;e+=1)xe[e].c();ee=_(),te=w("div"),ne=w("div"),ne.textContent="Total Weight",re=_(),oe=w("div"),ie=k(ce),s.src!==(a="assets/coins.png")&&I(s,"src","assets/coins.png"),I(s,"alt","Pile of coins"),I(s,"class","w-6"),I(u,"class","text-xs"),I(p,"class","w-8"),I(p,"type","number"),I(m,"class","text-xs"),I(g,"class","w-8"),I(g,"type","number"),I(M,"class","text-xs"),I(q,"class","w-8"),I(q,"type","number"),I(j,"class","text-xs"),I(F,"class","w-8"),I(F,"type","number"),I(W,"class","text-xs"),I(z,"class","w-8"),I(z,"type","number"),I(i,"class","grid grid-cols-6 justify-items-center mb-4"),I(K,"class","header"),I(V,"class","header"),I(Y,"class","header"),I(X,"class","table mb-4 svelte-svvyjd"),I(oe,"class","text-2xl"),I(te,"class","text-center")},m(n,o){ye(t,n,o),y(n,r,o),y(n,i,o),$(i,s),$(i,l),$(i,c),$(c,u),$(c,f),$(c,p),T(p,e[2]),$(i,h),$(i,d),$(d,m),$(d,v),$(d,g),T(g,e[3]),$(i,E),$(i,A),$(A,M),$(A,O),$(A,q),T(q,e[4]),$(i,D),$(i,R),$(R,j),$(R,P),$(R,F),T(F,e[5]),$(i,B),$(i,L),$(L,W),$(L,U),$(L,z),T(z,e[6]),y(n,H,o),y(n,X,o),$(X,K),$(X,V),$(X,Y),$(X,G);for(let e=0;e<me.length;e+=1)me[e].m(X,null);$(X,Q);for(let e=0;e<xe.length;e+=1)xe[e].m(X,null);y(n,ee,o),y(n,te,o),$(te,ne),$(te,re),$(te,oe),$(oe,ie),se=!0,ae||(le=[S(p,"input",e[19]),S(p,"blur",e[10]),S(g,"input",e[20]),S(g,"blur",e[10]),S(q,"input",e[21]),S(q,"blur",e[10]),S(F,"input",e[22]),S(F,"blur",e[10]),S(z,"input",e[23]),S(z,"blur",e[10])],ae=!0)},p(e,r){const o={};if(!n&&128&r[0]&&(n=!0,o.value=e[7],Z((()=>n=!1))),t.$set(o),4&r[0]&&C(p.value)!==e[2]&&T(p,e[2]),8&r[0]&&C(g.value)!==e[3]&&T(g,e[3]),16&r[0]&&C(q.value)!==e[4]&&T(q,e[4]),32&r[0]&&C(F.value)!==e[5]&&T(F,e[5]),64&r[0]&&C(z.value)!==e[6]&&T(z,e[6]),1&r[0]){let t;for(de=e[0].equipment.filter(e[24]),t=0;t<de.length;t+=1){const n=mo(e,de,t);me[t]?me[t].p(n,r):(me[t]=$o(n),me[t].c(),me[t].m(X,Q))}for(;t<me.length;t+=1)me[t].d(1);me.length=de.length}if(1&r[0]){let t;for(ve=e[0].equipment.filter(e[25]),t=0;t<ve.length;t+=1){const n=ho(e,ve,t);xe[t]?xe[t].p(n,r):(xe[t]=yo(n),xe[t].c(),xe[t].m(X,null))}for(;t<xe.length;t+=1)xe[t].d(1);xe.length=ve.length}(!se||2&r[0])&&ce!==(ce=e[1].totalWeight+"")&&N(ie,ce)},i(e){se||(fe(t.$$.fragment,e),se=!0)},o(e){pe(t.$$.fragment,e),se=!1},d(e){be(t,e),e&&b(r),e&&b(i),e&&b(H),e&&b(X),x(me,e),x(xe,e),e&&b(ee),e&&b(te),ae=!1,o(le)}}}function xo(e){let t,n,r,o=e[7]&&vo(e);return n=new Lr({props:{class:"relative",area:"inv",title:"Equipment",$$slots:{default:[bo]},$$scope:{ctx:e}}}),{c(){o&&o.c(),t=_(),$e(n.$$.fragment)},m(e,i){o&&o.m(e,i),y(e,t,i),ye(n,e,i),r=!0},p(e,r){e[7]?o?(o.p(e,r),128&r[0]&&fe(o,1)):(o=vo(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue());const i={};255&r[0]|2&r[1]&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(fe(o),fe(n.$$.fragment,e),r=!0)},o(e){pe(o),pe(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&b(t),be(n,e)}}}function wo(e,t,n){let{data:r}=t,{derived:o}=t,i=!1;const s=De(Gn);let{copper:a,silver:l,electrum:c,gold:u,platinum:f}=o.coin;return e.$$set=e=>{"data"in e&&n(0,r=e.data),"derived"in e&&n(1,o=e.derived)},e.$$.update=()=>{124&e.$$.dirty[0]&&n(0,r.coin=a+10*l+50*c+100*u+1e3*f,r)},[r,o,a,l,c,u,f,i,function(){n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f),n(7,i=!1)},s,function(){n(2,a=o.coin.copper),n(3,l=o.coin.silver),n(4,c=o.coin.electrum),n(5,u=o.coin.gold),n(6,f=o.coin.platinum)},function(t,o){e.$$.not_equal(r.equipment[o].name,t)&&(r.equipment[o].name=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t,o){e.$$.not_equal(r.equipment[o].count,t)&&(r.equipment[o].count=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t,o){e.$$.not_equal(r.equipment[o].weight,t)&&(r.equipment[o].weight=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t,o){e.$$.not_equal(r.equipment[o].type,t)&&(r.equipment[o].type=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t,o){e.$$.not_equal(r.equipment[o].isEquipped,t)&&(r.equipment[o].isEquipped=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t,o){e.$$.not_equal(r.equipment[o].description,t)&&(r.equipment[o].description=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(t){e.$$.not_equal(r.equipment,t)&&(r.equipment=t,n(0,r),n(2,a),n(3,l),n(4,c),n(5,u),n(6,f))},function(e){i=e,n(7,i)},function(){a=C(this.value),n(2,a)},function(){l=C(this.value),n(3,l)},function(){c=C(this.value),n(4,c)},function(){u=C(this.value),n(5,u)},function(){f=C(this.value),n(6,f)},e=>e.type===Gn.Equipment,e=>e.type===Gn.Item]}class ko extends ke{constructor(e){super(),we(this,e,wo,xo,s,{data:0,derived:1},[-1,-1])}}function _o(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function Eo(e){let t,n,r;function o(t){e[9](t)}let i={type:rr,$$slots:{default:[So,({index:e})=>({14:e}),({index:e})=>e?16384:0]},$$scope:{ctx:e}};return void 0!==e[0].tools&&(i.items=e[0].tools),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[4]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};49153&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.items=e[0].tools,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function So(e){let t,n,r,o,i,s,a,l,c,u,f,p,h;function d(t){e[5](t,e[14])}let m={class:"mb-2",label:"Name",placeholder:"Thieves' Tools"};function v(t){e[6](t,e[14])}void 0!==e[0].tools[e[14]].name&&(m.value=e[0].tools[e[14]].name),t=new Tr({props:m}),J.push((()=>ge(t,"value",d)));let g={class:"flex-1",label:"Proficient",items:[{value:Yn.None,text:"None"},{value:Yn.Proficient,text:"Proficient"},{value:Yn.Expertise,text:"Expertise"},{value:Yn.JackOfAllTrades,text:"Jack of All Trades"}]};function x(t){e[7](t,e[14])}void 0!==e[0].tools[e[14]].proficient&&(g.value=e[0].tools[e[14]].proficient),i=new Ge({props:g}),J.push((()=>ge(i,"value",v)));let k={class:"flex-1",label:"Ability",items:e[3]};function E(t){e[8](t,e[14])}void 0!==e[0].tools[e[14]].ability&&(k.value=e[0].tools[e[14]].ability),l=new Ge({props:k}),J.push((()=>ge(l,"value",x)));let S={class:"h-72 w-96",type:"textarea",label:"Description"};return void 0!==e[0].tools[e[14]].description&&(S.value=e[0].tools[e[14]].description),f=new Tr({props:S}),J.push((()=>ge(f,"value",E))),{c(){$e(t.$$.fragment),r=_(),o=w("div"),$e(i.$$.fragment),a=_(),$e(l.$$.fragment),u=_(),$e(f.$$.fragment),I(o,"class","gap-2 flex mb-2")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),ye(i,o,null),$(o,a),ye(l,o,null),y(e,u,n),ye(f,e,n),h=!0},p(r,o){e=r;const a={};!n&&16385&o&&(n=!0,a.value=e[0].tools[e[14]].name,Z((()=>n=!1))),t.$set(a);const u={};!s&&16385&o&&(s=!0,u.value=e[0].tools[e[14]].proficient,Z((()=>s=!1))),i.$set(u);const h={};!c&&16385&o&&(c=!0,h.value=e[0].tools[e[14]].ability,Z((()=>c=!1))),l.$set(h);const d={};!p&&16385&o&&(p=!0,d.value=e[0].tools[e[14]].description,Z((()=>p=!1))),f.$set(d)},i(e){h||(fe(t.$$.fragment,e),fe(i.$$.fragment,e),fe(l.$$.fragment,e),fe(f.$$.fragment,e),h=!0)},o(e){pe(t.$$.fragment,e),pe(i.$$.fragment,e),pe(l.$$.fragment,e),pe(f.$$.fragment,e),h=!1},d(e){be(t,e),e&&b(r),e&&b(o),be(i),be(l),e&&b(u),be(f,e)}}}function Ao(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v=e[11].name+"",g=e[1].tools[e[13]].modifier+"",x=e[1].tools[e[13]].ability+"",E=e[11].description+"";return{c(){t=w("label"),n=w("span"),r=k(v),o=_(),i=w("span"),s=k(g),a=_(),l=w("span"),c=k(x),u=_(),f=w("input"),p=_(),h=w("p"),d=k(E),m=_(),I(f,"class","hidden svelte-583zbl"),I(f,"type","checkbox"),I(h,"class","col-span-4 svelte-583zbl"),I(t,"class","contents")},m(e,v){y(e,t,v),$(t,n),$(n,r),$(t,o),$(t,i),$(i,s),$(t,a),$(t,l),$(l,c),$(t,u),$(t,f),$(t,p),$(t,h),$(h,d),$(t,m)},p(e,t){1&t&&v!==(v=e[11].name+"")&&N(r,v),2&t&&g!==(g=e[1].tools[e[13]].modifier+"")&&N(s,g),2&t&&x!==(x=e[1].tools[e[13]].ability+"")&&N(c,x),1&t&&E!==(E=e[11].description+"")&&N(d,E)},d(e){e&&b(t)}}}function Io(e){let t,n,r,o,i,s,a,l,c,u;function f(t){e[10](t)}let p={};void 0!==e[2]&&(p.value=e[2]),t=new qr({props:p}),J.push((()=>ge(t,"value",f)));let h=e[0].tools,d=[];for(let t=0;t<h.length;t+=1)d[t]=Ao(_o(e,h,t));return{c(){$e(t.$$.fragment),r=_(),o=w("div"),i=w("span"),i.textContent="Tool",s=w("span"),s.textContent="Pro",a=w("span"),a.textContent="Ability",l=w("span"),c=_();for(let e=0;e<d.length;e+=1)d[e].c();I(i,"class","header"),I(s,"class","header"),I(a,"class","header"),I(o,"class","table svelte-583zbl")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),$(o,i),$(o,s),$(o,a),$(o,l),$(o,c);for(let e=0;e<d.length;e+=1)d[e].m(o,null);u=!0},p(e,r){const i={};if(!n&&4&r&&(n=!0,i.value=e[2],Z((()=>n=!1))),t.$set(i),3&r){let t;for(h=e[0].tools,t=0;t<h.length;t+=1){const n=_o(e,h,t);d[t]?d[t].p(n,r):(d[t]=Ao(n),d[t].c(),d[t].m(o,null))}for(;t<d.length;t+=1)d[t].d(1);d.length=h.length}},i(e){u||(fe(t.$$.fragment,e),u=!0)},o(e){pe(t.$$.fragment,e),u=!1},d(e){be(t,e),e&&b(r),e&&b(o),x(d,e)}}}function Co(e){let t,n,r,o=e[2]&&Eo(e);return n=new Lr({props:{class:"relative mb-4 w-full",title:"Tool Proficiencies & Custom Skills",$$slots:{default:[Io]},$$scope:{ctx:e}}}),{c(){o&&o.c(),t=_(),$e(n.$$.fragment)},m(e,i){o&&o.m(e,i),y(e,t,i),ye(n,e,i),r=!0},p(e,[r]){e[2]?o?(o.p(e,r),4&r&&fe(o,1)):(o=Eo(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue());const i={};32775&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(fe(o),fe(n.$$.fragment,e),r=!0)},o(e){pe(o),pe(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&b(t),be(n,e)}}}function No(e,t,n){let{data:r}=t,{derived:o}=t,i=!1;const s=De(Vn);return e.$$set=e=>{"data"in e&&n(0,r=e.data),"derived"in e&&n(1,o=e.derived)},[r,o,i,s,function(){n(0,r),n(2,i=!1)},function(t,o){e.$$.not_equal(r.tools[o].name,t)&&(r.tools[o].name=t,n(0,r))},function(t,o){e.$$.not_equal(r.tools[o].proficient,t)&&(r.tools[o].proficient=t,n(0,r))},function(t,o){e.$$.not_equal(r.tools[o].ability,t)&&(r.tools[o].ability=t,n(0,r))},function(t,o){e.$$.not_equal(r.tools[o].description,t)&&(r.tools[o].description=t,n(0,r))},function(t){e.$$.not_equal(r.tools,t)&&(r.tools=t,n(0,r))},function(e){i=e,n(2,i)}]}class To extends ke{constructor(e){super(),we(this,e,No,Co,s,{data:0,derived:1})}}function Mo(e,t,n){const r=e.slice();return r[9]=t[n],r}function Oo(e){let t,n,r;function o(t){e[7](t)}let i={type:or,$$slots:{default:[qo,({index:e})=>({12:e}),({index:e})=>e?4096:0]},$$scope:{ctx:e}};return void 0!==e[0].proficiencies&&(i.items=e[0].proficiencies),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[2]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};12289&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.items=e[0].proficiencies,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function qo(e){let t,n,r,o,i,s,a,l,c,u;function f(t){e[4](t,e[12])}let p={label:"Type",items:e[3]};function h(t){e[5](t,e[12])}void 0!==e[0].proficiencies[e[12]].type&&(p.value=e[0].proficiencies[e[12]].type),n=new Ge({props:p}),J.push((()=>ge(n,"value",f)));let d={label:"Proficiency",placeholder:"Common, Elvish"};function m(t){e[6](t,e[12])}void 0!==e[0].proficiencies[e[12]].name&&(d.value=e[0].proficiencies[e[12]].name),i=new Tr({props:d}),J.push((()=>ge(i,"value",h)));let v={label:"Source",placeholder:"Race: Elf"};return void 0!==e[0].proficiencies[e[12]].source&&(v.value=e[0].proficiencies[e[12]].source),l=new Tr({props:v}),J.push((()=>ge(l,"value",m))),{c(){t=w("div"),$e(n.$$.fragment),o=_(),$e(i.$$.fragment),a=_(),$e(l.$$.fragment),I(t,"class","gap-2 flex mb-4")},m(e,r){y(e,t,r),ye(n,t,null),$(t,o),ye(i,t,null),$(t,a),ye(l,t,null),u=!0},p(t,o){e=t;const a={};!r&&4097&o&&(r=!0,a.value=e[0].proficiencies[e[12]].type,Z((()=>r=!1))),n.$set(a);const u={};!s&&4097&o&&(s=!0,u.value=e[0].proficiencies[e[12]].name,Z((()=>s=!1))),i.$set(u);const f={};!c&&4097&o&&(c=!0,f.value=e[0].proficiencies[e[12]].source,Z((()=>c=!1))),l.$set(f)},i(e){u||(fe(n.$$.fragment,e),fe(i.$$.fragment,e),fe(l.$$.fragment,e),u=!0)},o(e){pe(n.$$.fragment,e),pe(i.$$.fragment,e),pe(l.$$.fragment,e),u=!1},d(e){e&&b(t),be(n),be(i),be(l)}}}function Do(e){let t,n,r,o,i,s=Qn[e[9].type]+"",a=e[9].name+"";return{c(){t=w("span"),n=k(s),r=_(),o=w("span"),i=k(a)},m(e,s){y(e,t,s),$(t,n),y(e,r,s),y(e,o,s),$(o,i)},p(e,t){1&t&&s!==(s=Qn[e[9].type]+"")&&N(n,s),1&t&&a!==(a=e[9].name+"")&&N(i,a)},d(e){e&&b(t),e&&b(r),e&&b(o)}}}function Ro(e){let t,n,r,o,i,s,a,l;function c(t){e[8](t)}let u={};void 0!==e[1]&&(u.value=e[1]),t=new qr({props:u}),J.push((()=>ge(t,"value",c)));let f=e[0].proficiencies,p=[];for(let t=0;t<f.length;t+=1)p[t]=Do(Mo(e,f,t));return{c(){$e(t.$$.fragment),r=_(),o=w("div"),i=w("span"),i.textContent="Type",s=w("span"),s.textContent="Proficiency",a=_();for(let e=0;e<p.length;e+=1)p[e].c();I(i,"class","header"),I(s,"class","header"),I(o,"class","table svelte-1fqtyfj")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n),$(o,i),$(o,s),$(o,a);for(let e=0;e<p.length;e+=1)p[e].m(o,null);l=!0},p(e,r){const i={};if(!n&&2&r&&(n=!0,i.value=e[1],Z((()=>n=!1))),t.$set(i),1&r){let t;for(f=e[0].proficiencies,t=0;t<f.length;t+=1){const n=Mo(e,f,t);p[t]?p[t].p(n,r):(p[t]=Do(n),p[t].c(),p[t].m(o,null))}for(;t<p.length;t+=1)p[t].d(1);p.length=f.length}},i(e){l||(fe(t.$$.fragment,e),l=!0)},o(e){pe(t.$$.fragment,e),l=!1},d(e){be(t,e),e&&b(r),e&&b(o),x(p,e)}}}function jo(e){let t,n,r,o=e[1]&&Oo(e);return n=new Lr({props:{class:"relative w-full",title:"Other Proficiencies",$$slots:{default:[Ro]},$$scope:{ctx:e}}}),{c(){o&&o.c(),t=_(),$e(n.$$.fragment)},m(e,i){o&&o.m(e,i),y(e,t,i),ye(n,e,i),r=!0},p(e,[r]){e[1]?o?(o.p(e,r),2&r&&fe(o,1)):(o=Oo(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue());const i={};8195&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(fe(o),fe(n.$$.fragment,e),r=!0)},o(e){pe(o),pe(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&b(t),be(n,e)}}}function Po(e,t,n){let{data:r}=t,o=!1;const i=De(Qn);return e.$$set=e=>{"data"in e&&n(0,r=e.data)},[r,o,function(){n(0,r),n(1,o=!1)},i,function(t,o){e.$$.not_equal(r.proficiencies[o].type,t)&&(r.proficiencies[o].type=t,n(0,r))},function(t,o){e.$$.not_equal(r.proficiencies[o].name,t)&&(r.proficiencies[o].name=t,n(0,r))},function(t,o){e.$$.not_equal(r.proficiencies[o].source,t)&&(r.proficiencies[o].source=t,n(0,r))},function(t){e.$$.not_equal(r.proficiencies,t)&&(r.proficiencies=t,n(0,r))},function(e){o=e,n(1,o)}]}class Fo extends ke{constructor(e){super(),we(this,e,Po,jo,s,{data:0})}}function Bo(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r}function Lo(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r[10]=t,r[11]=n,r}function Wo(e){let t,n;return t=new We({props:{$$slots:{default:[zo]},$$scope:{ctx:e}}}),t.$on("close",e[3]),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};4099&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Uo(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m=e[7].name+"";function v(){e[4].call(o,e[6])}return{c(){t=w("span"),n=k(m),r=_(),o=w("select"),i=w("option"),s=k("None"),a=w("option"),l=k("Proficient"),c=w("option"),u=k("Experties"),f=w("option"),p=k("Jack of All Trades"),i.__value=Yn.None,i.value=i.__value,a.__value=Yn.Proficient,a.value=a.__value,c.__value=Yn.Expertise,c.value=c.__value,f.__value=Yn.JackOfAllTrades,f.value=f.__value,void 0===e[0].skills[e[6]]&&Q(v)},m(m,g){y(m,t,g),$(t,n),y(m,r,g),y(m,o,g),$(o,i),$(i,s),$(o,a),$(a,l),$(o,c),$(c,u),$(o,f),$(f,p),M(o,e[0].skills[e[6]]),h||(d=S(o,"change",v),h=!0)},p(t,r){e=t,2&r&&m!==(m=e[7].name+"")&&N(n,m),3&r&&M(o,e[0].skills[e[6]])},d(e){e&&b(t),e&&b(r),e&&b(o),h=!1,d()}}}function zo(e){let t,n,r,o,i,s,a,l,c,u,f,p=Object.entries(e[1].skills),h=[];for(let t=0;t<p.length;t+=1)h[t]=Uo(Lo(e,p,t));return{c(){t=w("div"),n=w("span"),n.textContent="Skill",r=w("span"),r.textContent="Proficieny",o=w("span"),o.textContent="Skill",i=w("span"),i.textContent="Proficieny",s=_();for(let e=0;e<h.length;e+=1)h[e].c();a=_(),l=w("div"),c=w("button"),c.textContent="Done",I(t,"class","dialog grid gap-4 items-center svelte-121eylk"),I(c,"class","text-primary-400 py-2 px-4 uppercase font-medium text-sm"),I(l,"class","flex justify-end mt-4 w-full")},m(p,d){y(p,t,d),$(t,n),$(t,r),$(t,o),$(t,i),$(t,s);for(let e=0;e<h.length;e+=1)h[e].m(t,null);y(p,a,d),y(p,l,d),$(l,c),u||(f=S(c,"click",e[3]),u=!0)},p(e,n){if(3&n){let r;for(p=Object.entries(e[1].skills),r=0;r<p.length;r+=1){const o=Lo(e,p,r);h[r]?h[r].p(o,n):(h[r]=Uo(o),h[r].c(),h[r].m(t,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=p.length}},d(e){e&&b(t),x(h,e),e&&b(a),e&&b(l),u=!1,f()}}}function Ho(e){let t,n,r,o,i,s,a,l,c=e[0].skills[e[6]]==Yn.Proficient?"check_box":e[0].skills[e[6]]==Yn.Expertise?"check_boxcheck_box":e[0].skills[e[6]]==Yn.JackOfAllTrades?"indeterminate_check_box":"check_box_outline_blank",u=e[7].modifier+"",f=e[7].name+"";return{c(){t=w("span"),n=k(c),r=_(),o=w("span"),i=k(u),s=_(),a=w("span"),l=k(f),I(t,"class","material-icons text-right text-sm"),I(o,"class","justify-self-end")},m(e,c){y(e,t,c),$(t,n),y(e,r,c),y(e,o,c),$(o,i),y(e,s,c),y(e,a,c),$(a,l)},p(e,t){3&t&&c!==(c=e[0].skills[e[6]]==Yn.Proficient?"check_box":e[0].skills[e[6]]==Yn.Expertise?"check_boxcheck_box":e[0].skills[e[6]]==Yn.JackOfAllTrades?"indeterminate_check_box":"check_box_outline_blank")&&N(n,c),2&t&&u!==(u=e[7].modifier+"")&&N(i,u),2&t&&f!==(f=e[7].name+"")&&N(l,f)},d(e){e&&b(t),e&&b(r),e&&b(o),e&&b(s),e&&b(a)}}}function Xo(e){let t,n,r,o,i;function s(t){e[5](t)}let a={};void 0!==e[2]&&(a.value=e[2]),t=new qr({props:a}),J.push((()=>ge(t,"value",s)));let l=Object.entries(e[1].skills),c=[];for(let t=0;t<l.length;t+=1)c[t]=Ho(Bo(e,l,t));return{c(){$e(t.$$.fragment),r=_(),o=w("div");for(let e=0;e<c.length;e+=1)c[e].c();I(o,"class","skills grid gap-x-4 gap-y-1 svelte-121eylk")},m(e,n){ye(t,e,n),y(e,r,n),y(e,o,n);for(let e=0;e<c.length;e+=1)c[e].m(o,null);i=!0},p(e,r){const i={};if(!n&&4&r&&(n=!0,i.value=e[2],Z((()=>n=!1))),t.$set(i),3&r){let t;for(l=Object.entries(e[1].skills),t=0;t<l.length;t+=1){const n=Bo(e,l,t);c[t]?c[t].p(n,r):(c[t]=Ho(n),c[t].c(),c[t].m(o,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}},i(e){i||(fe(t.$$.fragment,e),i=!0)},o(e){pe(t.$$.fragment,e),i=!1},d(e){be(t,e),e&&b(r),e&&b(o),x(c,e)}}}function Jo(e){let t,n,r,o=e[2]&&Wo(e);return n=new Lr({props:{class:"skills relative mb-4 pt-6 px-6",title:"Skills",$$slots:{default:[Xo]},$$scope:{ctx:e}}}),{c(){o&&o.c(),t=_(),$e(n.$$.fragment)},m(e,i){o&&o.m(e,i),y(e,t,i),ye(n,e,i),r=!0},p(e,[r]){e[2]?o?(o.p(e,r),4&r&&fe(o,1)):(o=Wo(e),o.c(),fe(o,1),o.m(t.parentNode,t)):o&&(ce(),pe(o,1,1,(()=>{o=null})),ue());const i={};4103&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(fe(o),fe(n.$$.fragment,e),r=!0)},o(e){pe(o),pe(n.$$.fragment,e),r=!1},d(e){o&&o.d(e),e&&b(t),be(n,e)}}}function Ko(e,t,n){let{data:r}=t,{derived:o}=t,i=!1;return e.$$set=e=>{"data"in e&&n(0,r=e.data),"derived"in e&&n(1,o=e.derived)},[r,o,i,function(){n(2,i=!1)},function(e){r.skills[e]=O(this),n(0,r),n(1,o)},function(e){i=e,n(2,i)}]}class Vo extends ke{constructor(e){super(),we(this,e,Ko,Jo,s,{data:0,derived:1})}}function Yo(e,t,n){const r=e.slice();return r[18]=t[n],r}function Go(e,t,n){const r=e.slice();return r[22]=t[n],r[23]=t,r[24]=n,r}function Qo(e){let t,n,r;function o(t){e[15](t)}let i={type:ar,class:"flex",$$slots:{default:[ei,({index:e})=>({21:e}),({index:e})=>e?2097152:0]},$$scope:{ctx:e}};return void 0!==e[0].effects&&(i.items=e[0].effects),t=new Er({props:i}),J.push((()=>ge(t,"items",o))),t.$on("close",e[3]),{c(){$e(t.$$.fragment)},m(e,n){ye(t,e,n),r=!0},p(e,r){const o={};35651585&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.items=e[0].effects,Z((()=>n=!1))),t.$set(o)},i(e){r||(fe(t.$$.fragment,e),r=!0)},o(e){pe(t.$$.fragment,e),r=!1},d(e){be(t,e)}}}function Zo(e){let t,n,r,o,i,s,a,l,c,u,f;function p(t){e[11](t,e[22])}let h={class:"mr-2",label:"Stat",items:[{text:"Ability Scores",items:e[6]},{text:"Other Stats",items:[{text:"Armor Class",value:Zn.AC},{text:"Speed",value:Zn.SPEED}]}]};function d(t){e[12](t,e[22])}void 0!==e[22].stat&&(h.value=e[22].stat),n=new Ge({props:h}),J.push((()=>ge(n,"value",p)));let m={label:"Expression",placeholder:"STR + 2"};function v(){return e[13](e[21],e[24])}return void 0!==e[22].expr&&(m.value=e[22].expr),i=new Tr({props:m}),J.push((()=>ge(i,"value",d))),{c(){t=w("li"),$e(n.$$.fragment),o=k("\n            =\n            "),$e(i.$$.fragment),a=_(),l=w("span"),l.textContent="clear",I(l,"class","material-icons text-sm cursor-pointer"),I(t,"class","flex items-center")},m(e,r){y(e,t,r),ye(n,t,null),$(t,o),ye(i,t,null),$(t,a),$(t,l),c=!0,u||(f=S(l,"click",v),u=!0)},p(t,o){e=t;const a={};!r&&2097153&o&&(r=!0,a.value=e[22].stat,Z((()=>r=!1))),n.$set(a);const l={};!s&&2097153&o&&(s=!0,l.value=e[22].expr,Z((()=>s=!1))),i.$set(l)},i(e){c||(fe(n.$$.fragment,e),fe(i.$$.fragment,e),c=!0)},o(e){pe(n.$$.fragment,e),pe(i.$$.fragment,e),c=!1},d(e){e&&b(t),be(n),be(i),u=!1,f()}}}function ei(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v,g,k,E,A,C,N;function T(t){e[7](t,e[21])}let M={label:"Name"};function O(t){e[8](t,e[21])}void 0!==e[0].effects[e[21]].name&&(M.value=e[0].effects[e[21]].name),n=new Tr({props:M}),J.push((()=>ge(n,"value",T)));let q={label:"Source"};function D(t){e[9](t,e[21])}void 0!==e[0].effects[e[21]].source&&(q.value=e[0].effects[e[21]].source),i=new Tr({props:q}),J.push((()=>ge(i,"value",O)));let R={label:"Duration"};function j(t){e[10](t,e[21])}void 0!==e[0].effects[e[21]].duration&&(R.value=e[0].effects[e[21]].duration),l=new Tr({props:R}),J.push((()=>ge(l,"value",D)));let P={label:"Description",type:"textarea",class:"h-72 w-96"};void 0!==e[0].effects[e[21]].description&&(P.value=e[0].effects[e[21]].description),f=new Tr({props:P}),J.push((()=>ge(f,"value",j)));let F=e[0].effects[e[21]].modifiers,B=[];for(let t=0;t<F.length;t+=1)B[t]=Zo(Go(e,F,t));const L=e=>pe(B[e],1,1,(()=>{B[e]=null}));function W(){return e[14](e[21])}return{c(){t=w("div"),$e(n.$$.fragment),o=_(),$e(i.$$.fragment),a=_(),$e(l.$$.fragment),u=_(),$e(f.$$.fragment),h=_(),d=w("div"),m=w("span"),m.textContent="Stat Modifiers",v=_(),g=w("ul");for(let e=0;e<B.length;e+=1)B[e].c();k=_(),E=w("li"),E.textContent="+",I(E,"class","py-2 px-4 hover:bg-blue-100 text-center cursor-pointer"),I(g,"class","w-60"),I(d,"class","m-4")},m(e,r){y(e,t,r),ye(n,t,null),$(t,o),ye(i,t,null),$(t,a),ye(l,t,null),$(t,u),ye(f,t,null),y(e,h,r),y(e,d,r),$(d,m),$(d,v),$(d,g);for(let e=0;e<B.length;e+=1)B[e].m(g,null);$(g,k),$(g,E),A=!0,C||(N=S(E,"click",W),C=!0)},p(t,o){e=t;const a={};!r&&2097153&o&&(r=!0,a.value=e[0].effects[e[21]].name,Z((()=>r=!1))),n.$set(a);const u={};!s&&2097153&o&&(s=!0,u.value=e[0].effects[e[21]].source,Z((()=>s=!1))),i.$set(u);const h={};!c&&2097153&o&&(c=!0,h.value=e[0].effects[e[21]].duration,Z((()=>c=!1))),l.$set(h);const d={};if(!p&&2097153&o&&(p=!0,d.value=e[0].effects[e[21]].description,Z((()=>p=!1))),f.$set(d),2097249&o){let t;for(F=e[0].effects[e[21]].modifiers,t=0;t<F.length;t+=1){const n=Go(e,F,t);B[t]?(B[t].p(n,o),fe(B[t],1)):(B[t]=Zo(n),B[t].c(),fe(B[t],1),B[t].m(g,k))}for(ce(),t=F.length;t<B.length;t+=1)L(t);ue()}},i(e){if(!A){fe(n.$$.fragment,e),fe(i.$$.fragment,e),fe(l.$$.fragment,e),fe(f.$$.fragment,e);for(let e=0;e<F.length;e+=1)fe(B[e]);A=!0}},o(e){pe(n.$$.fragment,e),pe(i.$$.fragment,e),pe(l.$$.fragment,e),pe(f.$$.fragment,e),B=B.filter(Boolean);for(let e=0;e<B.length;e+=1)pe(B[e]);A=!1},d(e){e&&b(t),be(n),be(i),be(l),be(f),e&&b(h),e&&b(d),x(B,e),C=!1,N()}}}function ti(e){let t,n;return t=new io({props:{title:e[18].name,subtitle:e[18].source+" ("+e[18].duration+")",content:e[18].description,expanded:e[1]===e[18]}}),t.$on("click",(function(){return e[17](e[18])})),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(n,r){e=n;const o={};1&r&&(o.title=e[18].name),1&r&&(o.subtitle=e[18].source+" ("+e[18].duration+")"),1&r&&(o.content=e[18].description),3&r&&(o.expanded=e[1]===e[18]),t.$set(o)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function ni(e){let t,n,r,o,i,s,a,l,c,u=e[2]&&Qo(e);function f(t){e[16](t)}let p={};void 0!==e[2]&&(p.value=e[2]),r=new qr({props:p}),J.push((()=>ge(r,"value",f))),a=new mr({props:{value:"Active Effects"}});let h=e[0].effects,d=[];for(let t=0;t<h.length;t+=1)d[t]=ti(Yo(e,h,t));const m=e=>pe(d[e],1,1,(()=>{d[e]=null}));return{c(){u&&u.c(),t=_(),n=w("div"),$e(r.$$.fragment),i=_(),s=w("div"),$e(a.$$.fragment),l=_();for(let e=0;e<d.length;e+=1)d[e].c();I(s,"class","accordion pt-6 px-6 pb-2 rounded-t"),I(n,"class","relative mb-4")},m(e,o){u&&u.m(e,o),y(e,t,o),y(e,n,o),ye(r,n,null),$(n,i),$(n,s),ye(a,s,null),$(n,l);for(let e=0;e<d.length;e+=1)d[e].m(n,null);c=!0},p(e,[i]){e[2]?u?(u.p(e,i),4&i&&fe(u,1)):(u=Qo(e),u.c(),fe(u,1),u.m(t.parentNode,t)):u&&(ce(),pe(u,1,1,(()=>{u=null})),ue());const s={};if(!o&&4&i&&(o=!0,s.value=e[2],Z((()=>o=!1))),r.$set(s),3&i){let t;for(h=e[0].effects,t=0;t<h.length;t+=1){const r=Yo(e,h,t);d[t]?(d[t].p(r,i),fe(d[t],1)):(d[t]=ti(r),d[t].c(),fe(d[t],1),d[t].m(n,null))}for(ce(),t=h.length;t<d.length;t+=1)m(t);ue()}},i(e){if(!c){fe(u),fe(r.$$.fragment,e),fe(a.$$.fragment,e);for(let e=0;e<h.length;e+=1)fe(d[e]);c=!0}},o(e){pe(u),pe(r.$$.fragment,e),pe(a.$$.fragment,e),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)pe(d[e]);c=!1},d(e){u&&u.d(e),e&&b(t),e&&b(n),be(r),be(a),x(d,e)}}}function ri(e,t,n){let r,{data:o}=t,i=!1;function s(e){e.modifiers.push(new lr),n(0,o)}function a(e,t){e.modifiers.splice(t,1),n(0,o)}const l=De(Vn);return e.$$set=e=>{"data"in e&&n(0,o=e.data)},[o,r,i,function(){n(2,i=!1),n(0,o)},s,a,l,function(t,r){e.$$.not_equal(o.effects[r].name,t)&&(o.effects[r].name=t,n(0,o))},function(t,r){e.$$.not_equal(o.effects[r].source,t)&&(o.effects[r].source=t,n(0,o))},function(t,r){e.$$.not_equal(o.effects[r].duration,t)&&(o.effects[r].duration=t,n(0,o))},function(t,r){e.$$.not_equal(o.effects[r].description,t)&&(o.effects[r].description=t,n(0,o))},function(t,r){e.$$.not_equal(r.stat,t)&&(r.stat=t,n(0,o))},function(t,r){e.$$.not_equal(r.expr,t)&&(r.expr=t,n(0,o))},(e,t)=>a(o.effects[e],t),e=>s(o.effects[e]),function(t){e.$$.not_equal(o.effects,t)&&(o.effects=t,n(0,o))},function(e){i=e,n(2,i)},e=>n(1,r=r===e?void 0:e)]}class oi extends ke{constructor(e){super(),we(this,e,ri,ni,s,{data:0})}}function ii(e,t,n){const r=e.slice();return r[30]=t[n][0],r[31]=t[n][1],r}function si(e,t,n){const r=e.slice();return r[34]=t[n][0],r[31]=t[n][1],r[35]=t,r[36]=n,r}function ai(e,t,n){const r=e.slice();return r[34]=t[n][0],r[37]=t[n][1],r[38]=t,r[39]=n,r}function li(e,t,n){const r=e.slice();return r[40]=t[n],r}function ci(t){let n,r,o=t[40]+"";return{c(){n=w("option"),r=k(o),n.__value=t[40],n.value=n.__value},m(e,t){y(e,n,t),$(n,r)},p:e,d(e){e&&b(n)}}}function ui(e){let t,n,r,i,s,a,l,c,u,f,p,h,d,m,v,g,k,E,A,C,N,O,q,D,R,j,P,F,B,L=Oe(1,21),W=[];for(let t=0;t<L.length;t+=1)W[t]=ci(li(e,L,t));return{c(){t=w("label"),n=w("div"),r=w("input"),i=_(),s=w("select");for(let e=0;e<W.length;e+=1)W[e].c();a=_(),l=w("span"),l.textContent="Class & Level",c=_(),u=w("label"),f=w("input"),p=_(),h=w("span"),h.textContent="Background",d=_(),m=w("label"),v=w("input"),g=_(),k=w("span"),k.textContent="Race",E=_(),A=w("label"),C=w("input"),N=_(),O=w("span"),O.textContent="Alignment",q=_(),D=w("label"),R=w("input"),j=_(),P=w("span"),P.textContent="Experience Points",I(s,"class","flex-grow"),void 0===e[0].level&&Q((()=>e[4].call(s))),I(n,"class","flex w-full border-b border-gray-200"),I(l,"class","text-sm"),I(f,"class","w-full border-b border-gray-200"),I(h,"class","text-sm"),I(u,"class","col-span-2"),I(v,"class","w-full border-b border-gray-200"),I(k,"class","text-sm"),I(C,"class","w-full border-b border-gray-200"),I(O,"class","text-sm"),I(R,"class","w-full border-b border-gray-200"),I(P,"class","text-sm")},m(o,b){y(o,t,b),$(t,n),$(n,r),T(r,e[0].playerClass),$(n,i),$(n,s);for(let e=0;e<W.length;e+=1)W[e].m(s,null);M(s,e[0].level),$(t,a),$(t,l),y(o,c,b),y(o,u,b),$(u,f),T(f,e[0].background),$(u,p),$(u,h),y(o,d,b),y(o,m,b),$(m,v),T(v,e[0].race),$(m,g),$(m,k),y(o,E,b),y(o,A,b),$(A,C),T(C,e[0].alignment),$(A,N),$(A,O),y(o,q,b),y(o,D,b),$(D,R),T(R,e[0].exp),$(D,j),$(D,P),F||(B=[S(r,"input",e[3]),S(s,"change",e[4]),S(f,"input",e[5]),S(v,"input",e[6]),S(C,"input",e[7]),S(R,"input",e[8])],F=!0)},p(e,t){if(1&t[0]&&r.value!==e[0].playerClass&&T(r,e[0].playerClass),0&t){let n;for(L=Oe(1,21),n=0;n<L.length;n+=1){const r=li(e,L,n);W[n]?W[n].p(r,t):(W[n]=ci(r),W[n].c(),W[n].m(s,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=L.length}1&t[0]&&M(s,e[0].level),1&t[0]&&f.value!==e[0].background&&T(f,e[0].background),1&t[0]&&v.value!==e[0].race&&T(v,e[0].race),1&t[0]&&C.value!==e[0].alignment&&T(C,e[0].alignment),1&t[0]&&R.value!==e[0].exp&&T(R,e[0].exp)},d(e){e&&b(t),x(W,e),e&&b(c),e&&b(u),e&&b(d),e&&b(m),e&&b(E),e&&b(A),e&&b(q),e&&b(D),F=!1,o(B)}}}function fi(e){let t,n,r,o,i,s,a,l,c,u,f,p=e[37].name+"",h=e[37].modifier+"";function d(){e[9].call(l,e[34])}return{c(){t=w("label"),n=w("span"),r=k(p),o=_(),i=w("span"),s=k(h),a=_(),l=w("input"),c=_(),I(i,"class","my-1 text-5xl"),I(l,"class","text-center text-2xl"),I(l,"type","number"),I(t,"class","flex items-center flex-col")},m(p,h){y(p,t,h),$(t,n),$(n,r),$(t,o),$(t,i),$(i,s),$(t,a),$(t,l),T(l,e[0].abilityScores[e[34]]),y(p,c,h),u||(f=S(l,"input",d),u=!0)},p(t,n){e=t,2&n[0]&&p!==(p=e[37].name+"")&&N(r,p),2&n[0]&&h!==(h=e[37].modifier+"")&&N(s,h),3&n[0]&&C(l.value)!==e[0].abilityScores[e[34]]&&T(l,e[0].abilityScores[e[34]])},d(e){e&&b(t),e&&b(c),u=!1,f()}}}function pi(e){let t,n;return t=new Lr({props:{class:"mb-4",$$slots:{default:[fi]},$$scope:{ctx:e}}}),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};3&n[0]|4096&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function hi(e){let t,n,r,o,i,s;return{c(){t=w("label"),n=w("input"),r=_(),o=w("span"),o.textContent="Inspiration",I(n,"type","checkbox"),I(o,"class","flex-grow text-center"),I(t,"class","flex px-4")},m(a,l){y(a,t,l),$(t,n),n.checked=e[0].inspiration,$(t,r),$(t,o),i||(s=S(n,"change",e[10]),i=!0)},p(e,t){1&t[0]&&(n.checked=e[0].inspiration)},d(e){e&&b(t),i=!1,s()}}}function di(e){let t,n,r,o,i,s;return{c(){t=w("label"),n=w("input"),r=_(),o=w("span"),o.textContent="Proficiency Bonus",I(n,"class","w-6 text-center"),I(n,"type","number"),I(o,"class","flex-grow text-center"),I(t,"class","flex px-4")},m(a,l){y(a,t,l),$(t,n),T(n,e[0].proficiency),$(t,r),$(t,o),i||(s=S(n,"input",e[11]),i=!0)},p(e,t){1&t[0]&&C(n.value)!==e[0].proficiency&&T(n,e[0].proficiency)},d(e){e&&b(t),i=!1,s()}}}function mi(e){let t,n,r,o,i,s,a,l,c,u,f=e[31].modifier+"",p=e[31].name+"";function h(){e[12].call(n,e[34])}return{c(){t=w("label"),n=w("input"),r=_(),o=w("span"),i=k(f),s=_(),a=k(p),l=_(),I(n,"class","text-dark mr-4"),I(n,"type","checkbox"),I(o,"class","mr-4"),I(t,"class","flex")},m(f,p){y(f,t,p),$(t,n),n.checked=e[0].savingThrows[e[34]],$(t,r),$(t,o),$(o,i),$(t,s),$(t,a),$(t,l),c||(u=S(n,"change",h),c=!0)},p(t,r){e=t,3&r[0]&&(n.checked=e[0].savingThrows[e[34]]),2&r[0]&&f!==(f=e[31].modifier+"")&&N(i,f),2&r[0]&&p!==(p=e[31].name+"")&&N(a,p)},d(e){e&&b(t),c=!1,u()}}}function vi(e){let t,n=Object.entries(e[1].savingThrows),r=[];for(let t=0;t<n.length;t+=1)r[t]=mi(si(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=E()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);y(e,t,n)},p(e,o){if(3&o[0]){let i;for(n=Object.entries(e[1].savingThrows),i=0;i<n.length;i+=1){const s=si(e,n,i);r[i]?r[i].p(s,o):(r[i]=mi(s),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){x(r,e),e&&b(t)}}}function gi(e){let t,n,r,o,i=10+e[1].skills.perception.modifier+"";return{c(){t=w("span"),n=k(i),r=_(),o=w("span"),o.textContent="passive wisdom (perception)",I(t,"class","w-12"),I(o,"class","flex-grow text-center")},m(e,i){y(e,t,i),$(t,n),y(e,r,i),y(e,o,i)},p(e,t){2&t[0]&&i!==(i=10+e[1].skills.perception.modifier+"")&&N(n,i)},d(e){e&&b(t),e&&b(r),e&&b(o)}}}function $i(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v,g,x,E=e[1].armorClass+"",S=e[1].abilityScores[Vn.DEX].modifier+"",A=e[1].speed+"";return n=new mr({props:{value:"Armor Class"}}),l=new mr({props:{value:"Initiative"}}),d=new mr({props:{value:"Speed"}}),{c(){t=w("div"),$e(n.$$.fragment),r=_(),o=w("div"),i=k(E),s=_(),a=w("div"),$e(l.$$.fragment),c=_(),u=w("div"),f=k(S),p=_(),h=w("div"),$e(d.$$.fragment),m=_(),v=w("div"),g=k(A),I(o,"class","text-5xl"),I(u,"class","text-5xl"),I(a,"class","px-2 pb-2 border-r border-l"),I(v,"class","text-5xl")},m(e,b){y(e,t,b),ye(n,t,null),$(t,r),$(t,o),$(o,i),y(e,s,b),y(e,a,b),ye(l,a,null),$(a,c),$(a,u),$(u,f),y(e,p,b),y(e,h,b),ye(d,h,null),$(h,m),$(h,v),$(v,g),x=!0},p(e,t){(!x||2&t[0])&&E!==(E=e[1].armorClass+"")&&N(i,E),(!x||2&t[0])&&S!==(S=e[1].abilityScores[Vn.DEX].modifier+"")&&N(f,S),(!x||2&t[0])&&A!==(A=e[1].speed+"")&&N(g,A)},i(e){x||(fe(n.$$.fragment,e),fe(l.$$.fragment,e),fe(d.$$.fragment,e),x=!0)},o(e){pe(n.$$.fragment,e),pe(l.$$.fragment,e),pe(d.$$.fragment,e),x=!1},d(e){e&&b(t),be(n),e&&b(s),e&&b(a),be(l),e&&b(p),e&&b(h),be(d)}}}function yi(e){let t,n,r,i,s,a,l,c,u,f,p;return c=new mr({props:{value:"Current Hit Points"}}),{c(){t=w("label"),n=k("Hit Point Maximum\n        "),r=w("input"),i=_(),s=w("label"),a=w("input"),l=_(),$e(c.$$.fragment),I(r,"class","flex-grow ml-2 border-b border-gray-200 text-center"),I(r,"type","number"),I(t,"class","flex w-full"),I(a,"class","w-full text-center text-5xl"),I(a,"type","number")},m(o,h){y(o,t,h),$(t,n),$(t,r),T(r,e[0].hp.max),y(o,i,h),y(o,s,h),$(s,a),T(a,e[0].hp.current),$(s,l),ye(c,s,null),u=!0,f||(p=[S(r,"input",e[16]),S(a,"input",e[17])],f=!0)},p(e,t){1&t[0]&&C(r.value)!==e[0].hp.max&&T(r,e[0].hp.max),1&t[0]&&C(a.value)!==e[0].hp.current&&T(a,e[0].hp.current)},i(e){u||(fe(c.$$.fragment,e),u=!0)},o(e){pe(c.$$.fragment,e),u=!1},d(e){e&&b(t),e&&b(i),e&&b(s),be(c),f=!1,o(p)}}}function bi(e){let t,n,r;return{c(){t=w("input"),I(t,"class","w-full text-center text-5xl"),I(t,"type","number")},m(o,i){y(o,t,i),T(t,e[0].hp.temp),n||(r=S(t,"input",e[18]),n=!0)},p(e,n){1&n[0]&&C(t.value)!==e[0].hp.temp&&T(t,e[0].hp.temp)},d(e){e&&b(t),n=!1,r()}}}function xi(t){let n,r,o=t[30]+"";return{c(){n=w("option"),r=k(o),n.__value=t[31],n.value=n.__value},m(e,t){y(e,n,t),$(n,r)},p:e,d(e){e&&b(n)}}}function wi(e){let t,n,r,i,s,a,l,c,u,f,p=Object.entries(Kn).filter(Ei),h=[];for(let t=0;t<p.length;t+=1)h[t]=xi(ii(e,p,t));return{c(){t=w("label"),n=k("Total\n        "),r=w("input"),i=_(),s=w("input"),a=k("\n      Hit Dice ("),l=w("select");for(let e=0;e<h.length;e+=1)h[e].c();c=k(")"),I(r,"class","overflow-hidden flex-1 ml-2 border-b border-gray-200 text-center"),I(r,"type","number"),I(t,"class","flex"),I(s,"class","w-full text-center text-2xl"),I(s,"type","number"),I(l,"class","w-7"),void 0===e[0].hitDice.type&&Q((()=>e[21].call(l)))},m(o,p){y(o,t,p),$(t,n),$(t,r),T(r,e[0].hitDice.max),y(o,i,p),y(o,s,p),T(s,e[0].hitDice.current),y(o,a,p),y(o,l,p);for(let e=0;e<h.length;e+=1)h[e].m(l,null);M(l,e[0].hitDice.type),y(o,c,p),u||(f=[S(r,"input",e[19]),S(s,"input",e[20]),S(l,"change",e[21])],u=!0)},p(e,t){if(1&t[0]&&C(r.value)!==e[0].hitDice.max&&T(r,e[0].hitDice.max),1&t[0]&&C(s.value)!==e[0].hitDice.current&&T(s,e[0].hitDice.current),0&t){let n;for(p=Object.entries(Kn).filter(Ei),n=0;n<p.length;n+=1){const r=ii(e,p,n);h[n]?h[n].p(r,t):(h[n]=xi(r),h[n].c(),h[n].m(l,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=p.length}1&t[0]&&M(l,e[0].hitDice.type)},d(e){e&&b(t),e&&b(i),e&&b(s),e&&b(a),e&&b(l),x(h,e),e&&b(c),u=!1,o(f)}}}function ki(e){let t,n,r,i,s,a,l,c,u,f,p,h,d,m,v,g,x,E,A,C,T,M,O,q,D,R=e[0].deathSaves.success>=1?"check_box":"check_box_outline_blank",j=e[0].deathSaves.success>=2?"check_box":"check_box_outline_blank",P=e[0].deathSaves.success>=3?"check_box":"check_box_outline_blank",F=e[0].deathSaves.failure>=1?"disabled_by_default":"check_box_outline_blank",B=e[0].deathSaves.failure>=2?"disabled_by_default":"check_box_outline_blank",L=e[0].deathSaves.failure>=3?"disabled_by_default":"check_box_outline_blank";return{c(){t=w("div"),n=w("span"),n.textContent="Success",r=_(),i=w("span"),s=k(R),a=_(),l=w("span"),c=k(j),u=_(),f=w("span"),p=k(P),h=_(),d=w("div"),m=w("span"),m.textContent="Failure",v=_(),g=w("span"),x=k(F),E=_(),A=w("span"),C=k(B),T=_(),M=w("span"),O=k(L),I(n,"class","w-1/2"),I(i,"class","material-icons pointer-events-none"),I(l,"class","material-icons pointer-events-none"),I(f,"class","material-icons pointer-events-none"),I(t,"class","flex"),I(m,"class","w-1/2"),I(g,"class","material-icons pointer-events-none"),I(A,"class","material-icons pointer-events-none"),I(M,"class","material-icons pointer-events-none"),I(d,"class","flex")},m(o,b){y(o,t,b),$(t,n),$(t,r),$(t,i),$(i,s),$(t,a),$(t,l),$(l,c),$(t,u),$(t,f),$(f,p),y(o,h,b),y(o,d,b),$(d,m),$(d,v),$(d,g),$(g,x),$(d,E),$(d,A),$(A,C),$(d,T),$(d,M),$(M,O),q||(D=[S(t,"click",e[22]),S(d,"click",e[23])],q=!0)},p(e,t){1&t[0]&&R!==(R=e[0].deathSaves.success>=1?"check_box":"check_box_outline_blank")&&N(s,R),1&t[0]&&j!==(j=e[0].deathSaves.success>=2?"check_box":"check_box_outline_blank")&&N(c,j),1&t[0]&&P!==(P=e[0].deathSaves.success>=3?"check_box":"check_box_outline_blank")&&N(p,P),1&t[0]&&F!==(F=e[0].deathSaves.failure>=1?"disabled_by_default":"check_box_outline_blank")&&N(x,F),1&t[0]&&B!==(B=e[0].deathSaves.failure>=2?"disabled_by_default":"check_box_outline_blank")&&N(C,B),1&t[0]&&L!==(L=e[0].deathSaves.failure>=3?"disabled_by_default":"check_box_outline_blank")&&N(O,L)},d(e){e&&b(t),e&&b(h),e&&b(d),q=!1,o(D)}}}function _i(e){let t,n,r,o,i,s,a,l,c,u,f,p,h,d,m,v,g,E,A,C,N,M,O,q,D,R,j,P,F,B,L,W,U,z,H,X,K,V,Y,G,Q,ee,te,ne,re,oe,ie,se,ae,le,he,de,me,ve,xe,we,ke,_e;s=new Lr({props:{class:"grid grid-cols-3 gap-y-2 p-4 w-2/3",$$slots:{default:[ui]},$$scope:{ctx:e}}});let Ee=Object.entries(e[1].abilityScores),Se=[];for(let t=0;t<Ee.length;t+=1)Se[t]=pi(ai(e,Ee,t));const Ae=e=>pe(Se[e],1,1,(()=>{Se[e]=null}));function Ie(t){e[13](t)}h=new Lr({props:{class:"mb-4",$$slots:{default:[hi]},$$scope:{ctx:e}}}),m=new Lr({props:{class:"mb-4",$$slots:{default:[di]},$$scope:{ctx:e}}}),g=new Lr({props:{class:"flex flex-col mb-4 pt-6 px-6",title:"Saving Throws",$$slots:{default:[vi]},$$scope:{ctx:e}}});let Ce={derived:e[1]};function Ne(t){e[14](t)}void 0!==e[0]&&(Ce.data=e[0]),A=new Vo({props:Ce}),J.push((()=>ge(A,"data",Ie))),M=new Lr({props:{class:"flex mb-4 px-4 w-full",$$slots:{default:[gi]},$$scope:{ctx:e}}});let Te={derived:e[1]};function Me(t){e[15](t)}void 0!==e[0]&&(Te.data=e[0]),q=new To({props:Te}),J.push((()=>ge(q,"data",Ne)));let Oe={};function qe(t){e[24](t)}void 0!==e[0]&&(Oe.data=e[0]),j=new Fo({props:Oe}),J.push((()=>ge(j,"data",Me))),L=new Lr({props:{class:"grid grid-cols-3 gap-2 text-center",area:"stats",$$slots:{default:[$i]},$$scope:{ctx:e}}}),U=new Lr({props:{class:"flex flex-col w-full text-center",area:"hp",$$slots:{default:[yi]},$$scope:{ctx:e}}}),H=new Lr({props:{area:"tmp",title:"Temporary Hit Points",label:!0,$$slots:{default:[bi]},$$scope:{ctx:e}}}),K=new Lr({props:{class:"overflow-hidden text-center",area:"hit",$$slots:{default:[wi]},$$scope:{ctx:e}}}),Y=new Lr({props:{class:"flex overflow-hidden flex-col justify-around px-2",area:"ds",title:"Death Saves",$$slots:{default:[ki]},$$scope:{ctx:e}}});let De={derived:e[1]};function Re(t){e[25](t)}void 0!==e[0]&&(De.data=e[0]),Q=new Vr({props:De}),J.push((()=>ge(Q,"data",qe)));let je={derived:e[1]};function Pe(t){e[26](t)}void 0!==e[0]&&(je.data=e[0]),ne=new ko({props:je}),J.push((()=>ge(ne,"data",Re)));let Fe={};function Be(t){e[27](t)}void 0!==e[0]&&(Fe.data=e[0]),se=new oi({props:Fe}),J.push((()=>ge(se,"data",Pe)));let Le={};function We(t){e[28](t)}void 0!==e[0]&&(Le.data=e[0]),he=new to({props:Le}),J.push((()=>ge(he,"data",Be)));let Ue={};return void 0!==e[0]&&(Ue.data=e[0]),ve=new po({props:Ue}),J.push((()=>ge(ve,"data",We))),{c(){t=w("div"),n=w("label"),r=w("input"),o=k("\n    Character Name"),i=_(),$e(s.$$.fragment),a=_(),l=w("div"),c=w("div"),u=w("div");for(let e=0;e<Se.length;e+=1)Se[e].c();f=_(),p=w("div"),$e(h.$$.fragment),d=_(),$e(m.$$.fragment),v=_(),$e(g.$$.fragment),E=_(),$e(A.$$.fragment),N=_(),$e(M.$$.fragment),O=_(),$e(q.$$.fragment),R=_(),$e(j.$$.fragment),F=_(),B=w("div"),$e(L.$$.fragment),W=_(),$e(U.$$.fragment),z=_(),$e(H.$$.fragment),X=_(),$e(K.$$.fragment),V=_(),$e(Y.$$.fragment),G=_(),$e(Q.$$.fragment),te=_(),$e(ne.$$.fragment),oe=_(),ie=w("div"),$e(se.$$.fragment),le=_(),$e(he.$$.fragment),me=_(),$e(ve.$$.fragment),I(r,"class","w-full"),I(n,"class","p-4 w-1/3 border-t border-b border-gray-200 border-l"),I(t,"class","flex items-center mb-4"),I(u,"class","pr-2 w-1/3"),I(p,"class","pl-2 w-2/3"),I(c,"class","flex flex-wrap"),I(B,"class","second svelte-1fu2c2f"),I(l,"class","grid grid-cols-3 gap-4")},m(b,x){y(b,t,x),$(t,n),$(n,r),T(r,e[0].name),$(n,o),$(t,i),ye(s,t,null),y(b,a,x),y(b,l,x),$(l,c),$(c,u);for(let e=0;e<Se.length;e+=1)Se[e].m(u,null);$(c,f),$(c,p),ye(h,p,null),$(p,d),ye(m,p,null),$(p,v),ye(g,p,null),$(p,E),ye(A,p,null),$(c,N),ye(M,c,null),$(c,O),ye(q,c,null),$(c,R),ye(j,c,null),$(l,F),$(l,B),ye(L,B,null),$(B,W),ye(U,B,null),$(B,z),ye(H,B,null),$(B,X),ye(K,B,null),$(B,V),ye(Y,B,null),$(B,G),ye(Q,B,null),$(B,te),ye(ne,B,null),$(l,oe),$(l,ie),ye(se,ie,null),$(ie,le),ye(he,ie,null),$(ie,me),ye(ve,ie,null),we=!0,ke||(_e=S(r,"input",e[2]),ke=!0)},p(e,t){1&t[0]&&r.value!==e[0].name&&T(r,e[0].name);const n={};if(1&t[0]|4096&t[1]&&(n.$$scope={dirty:t,ctx:e}),s.$set(n),3&t[0]){let n;for(Ee=Object.entries(e[1].abilityScores),n=0;n<Ee.length;n+=1){const r=ai(e,Ee,n);Se[n]?(Se[n].p(r,t),fe(Se[n],1)):(Se[n]=pi(r),Se[n].c(),fe(Se[n],1),Se[n].m(u,null))}for(ce(),n=Ee.length;n<Se.length;n+=1)Ae(n);ue()}const o={};1&t[0]|4096&t[1]&&(o.$$scope={dirty:t,ctx:e}),h.$set(o);const i={};1&t[0]|4096&t[1]&&(i.$$scope={dirty:t,ctx:e}),m.$set(i);const a={};3&t[0]|4096&t[1]&&(a.$$scope={dirty:t,ctx:e}),g.$set(a);const l={};2&t[0]&&(l.derived=e[1]),!C&&1&t[0]&&(C=!0,l.data=e[0],Z((()=>C=!1))),A.$set(l);const c={};2&t[0]|4096&t[1]&&(c.$$scope={dirty:t,ctx:e}),M.$set(c);const f={};2&t[0]&&(f.derived=e[1]),!D&&1&t[0]&&(D=!0,f.data=e[0],Z((()=>D=!1))),q.$set(f);const p={};!P&&1&t[0]&&(P=!0,p.data=e[0],Z((()=>P=!1))),j.$set(p);const d={};2&t[0]|4096&t[1]&&(d.$$scope={dirty:t,ctx:e}),L.$set(d);const v={};1&t[0]|4096&t[1]&&(v.$$scope={dirty:t,ctx:e}),U.$set(v);const $={};1&t[0]|4096&t[1]&&($.$$scope={dirty:t,ctx:e}),H.$set($);const y={};1&t[0]|4096&t[1]&&(y.$$scope={dirty:t,ctx:e}),K.$set(y);const b={};1&t[0]|4096&t[1]&&(b.$$scope={dirty:t,ctx:e}),Y.$set(b);const x={};2&t[0]&&(x.derived=e[1]),!ee&&1&t[0]&&(ee=!0,x.data=e[0],Z((()=>ee=!1))),Q.$set(x);const w={};2&t[0]&&(w.derived=e[1]),!re&&1&t[0]&&(re=!0,w.data=e[0],Z((()=>re=!1))),ne.$set(w);const k={};!ae&&1&t[0]&&(ae=!0,k.data=e[0],Z((()=>ae=!1))),se.$set(k);const _={};!de&&1&t[0]&&(de=!0,_.data=e[0],Z((()=>de=!1))),he.$set(_);const E={};!xe&&1&t[0]&&(xe=!0,E.data=e[0],Z((()=>xe=!1))),ve.$set(E)},i(e){if(!we){fe(s.$$.fragment,e);for(let e=0;e<Ee.length;e+=1)fe(Se[e]);fe(h.$$.fragment,e),fe(m.$$.fragment,e),fe(g.$$.fragment,e),fe(A.$$.fragment,e),fe(M.$$.fragment,e),fe(q.$$.fragment,e),fe(j.$$.fragment,e),fe(L.$$.fragment,e),fe(U.$$.fragment,e),fe(H.$$.fragment,e),fe(K.$$.fragment,e),fe(Y.$$.fragment,e),fe(Q.$$.fragment,e),fe(ne.$$.fragment,e),fe(se.$$.fragment,e),fe(he.$$.fragment,e),fe(ve.$$.fragment,e),we=!0}},o(e){pe(s.$$.fragment,e),Se=Se.filter(Boolean);for(let e=0;e<Se.length;e+=1)pe(Se[e]);pe(h.$$.fragment,e),pe(m.$$.fragment,e),pe(g.$$.fragment,e),pe(A.$$.fragment,e),pe(M.$$.fragment,e),pe(q.$$.fragment,e),pe(j.$$.fragment,e),pe(L.$$.fragment,e),pe(U.$$.fragment,e),pe(H.$$.fragment,e),pe(K.$$.fragment,e),pe(Y.$$.fragment,e),pe(Q.$$.fragment,e),pe(ne.$$.fragment,e),pe(se.$$.fragment,e),pe(he.$$.fragment,e),pe(ve.$$.fragment,e),we=!1},d(e){e&&b(t),be(s),e&&b(a),e&&b(l),x(Se,e),be(h),be(m),be(g),be(A),be(M),be(q),be(j),be(L),be(U),be(H),be(K),be(Y),be(Q),be(ne),be(se),be(he),be(ve),ke=!1,_e()}}}const Ei=e=>"number"==typeof e[1];function Si(e,t,n){let r,{data:o}=t;const i=function(e,t){let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}}((e=>Ae.setItem(e.uid,e)),1e3);return e.$$set=e=>{"data"in e&&n(0,o=e.data)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(1,r=function(e){const t={abilityScores:qe(e.abilityScores,((e,t)=>({modifier:Math.floor((e-10)/2),name:ur[t]}))),armorClass:e.armorClass,speed:e.speed};for(const n of e.effects.flatMap((e=>e.modifiers)))try{const e=Xn.evaluate(n.expr.toUpperCase(),{STR:t.abilityScores[Vn.STR].modifier,DEX:t.abilityScores[Vn.DEX].modifier,CON:t.abilityScores[Vn.CON].modifier,INT:t.abilityScores[Vn.INT].modifier,WIS:t.abilityScores[Vn.WIS].modifier,CHA:t.abilityScores[Vn.CHA].modifier,AC:t.armorClass,SPEED:t.speed});switch(n.stat){case Zn.AC:t.armorClass=e;break;case Zn.SPEED:t.speed=e;break;default:t.abilityScores[n.stat].modifier=e}}catch(e){}function n(n,r){return t.abilityScores[n].modifier+(r==Yn.Proficient?e.proficiency:r==Yn.Expertise?2*e.proficiency:r==Yn.JackOfAllTrades?Math.floor(e.proficiency/2):0)}let r=e.coin,o=Math.floor(r/1e3);r%=1e3;let i=Math.floor(r/100);r%=100;let s=Math.floor(r/50);r%=50;let a=Math.floor(r/10);return r%=10,{...t,savingThrows:qe(e.savingThrows,((n,r)=>({modifier:t.abilityScores[r].modifier+(n?e.proficiency:0),name:ur[r]}))),tools:e.tools.map((e=>({ability:ur[e.ability],modifier:n(e.ability,e.proficient)}))),skills:{acrobatics:{name:"Acrobatics (Dex)",modifier:n(Vn.DEX,e.skills.acrobatics)},animalHandling:{name:"Animal Handling (Wis)",modifier:n(Vn.WIS,e.skills.animalHandling)},arcana:{name:"Arcana (Int)",modifier:n(Vn.INT,e.skills.arcana)},athletics:{name:"Athletics (Str)",modifier:n(Vn.STR,e.skills.athletics)},deception:{name:"Deception (Cha)",modifier:n(Vn.CHA,e.skills.deception)},history:{name:"History (Int)",modifier:n(Vn.INT,e.skills.history)},insight:{name:"Insight (Wis)",modifier:n(Vn.WIS,e.skills.insight)},intimidation:{name:"Medicine (Wis)",modifier:n(Vn.WIS,e.skills.intimidation)},investigation:{name:"Investigation (Int)",modifier:n(Vn.INT,e.skills.investigation)},medicine:{name:"Medicine (Wis)",modifier:n(Vn.WIS,e.skills.medicine)},nature:{name:"Nature (Int)",modifier:n(Vn.INT,e.skills.nature)},perception:{name:"Perception (Wis)",modifier:n(Vn.WIS,e.skills.perception)},performance:{name:"Performance (Cha)",modifier:n(Vn.CHA,e.skills.performance)},persuasion:{name:"Persuasion (Cha)",modifier:n(Vn.CHA,e.skills.persuasion)},religion:{name:"Religion (Int)",modifier:n(Vn.INT,e.skills.religion)},sleightOfHand:{name:"Sleight of Hand (Dex)",modifier:n(Vn.DEX,e.skills.sleightOfHand)},stealth:{name:"Stealth (Dex)",modifier:n(Vn.DEX,e.skills.stealth)},survival:{name:"Survival (Wis)",modifier:n(Vn.WIS,e.skills.survival)}},attacks:e.attacks.map((n=>({attackModifier:t.abilityScores[n.attackAbility].modifier+n.attackModifier+(n.proficient?e.proficiency:0),fullDamageRoll:`${n.damageRoll}+${t.abilityScores[n.damageAbility].modifier+n.damageModifier}`}))),coin:{copper:r,silver:a,electrum:s,gold:i,platinum:o},totalWeight:e.equipment.reduce(((e,t)=>e+t.weight),0)}}(o)),1&e.$$.dirty[0]&&i(o),3&e.$$.dirty[0]&&console.log(o,r)},[o,r,function(){o.name=this.value,n(0,o)},function(){o.playerClass=this.value,n(0,o)},function(){o.level=O(this),n(0,o)},function(){o.background=this.value,n(0,o)},function(){o.race=this.value,n(0,o)},function(){o.alignment=this.value,n(0,o)},function(){o.exp=this.value,n(0,o)},function(e){o.abilityScores[e]=C(this.value),n(0,o),n(1,r),n(0,o)},function(){o.inspiration=this.checked,n(0,o)},function(){o.proficiency=C(this.value),n(0,o)},function(e){o.savingThrows[e]=this.checked,n(0,o),n(1,r),n(0,o)},function(e){o=e,n(0,o)},function(e){o=e,n(0,o)},function(e){o=e,n(0,o)},function(){o.hp.max=C(this.value),n(0,o)},function(){o.hp.current=C(this.value),n(0,o)},function(){o.hp.temp=C(this.value),n(0,o)},function(){o.hitDice.max=C(this.value),n(0,o)},function(){o.hitDice.current=C(this.value),n(0,o)},function(){o.hitDice.type=O(this),n(0,o)},e=>n(0,o.deathSaves.success=(o.deathSaves.success+1)%4,o),e=>n(0,o.deathSaves.failure=(o.deathSaves.failure+1)%4,o),function(e){o=e,n(0,o)},function(e){o=e,n(0,o)},function(e){o=e,n(0,o)},function(e){o=e,n(0,o)},function(e){o=e,n(0,o)}]}class Ai extends ke{constructor(e){super(),we(this,e,Si,_i,s,{data:0},[-1,-1])}}function Ii(e){let t,n,r,i,s,a,c;const f=e[4].default,p=l(f,e,e[3],null);return{c(){t=w("div"),n=w("div"),p&&p.c(),I(n,"class","fixed top-0 bottom-0 left-0 p-2 w-64 bg-white shadow"),I(t,"class","fixed inset-0 z-40")},m(r,o){y(r,t,o),$(t,n),p&&p.m(n,null),s=!0,a||(c=[S(n,"click",A(e[5])),S(t,"click",e[6])],a=!0)},p(e,[t]){p&&p.p&&(!s||8&t)&&u(p,f,e,e[3],t,null,null)},i(t){s||(fe(p,t),Q((()=>{i&&i.end(1),r||(r=de(n,e[1],{})),r.start()})),s=!0)},o(t){pe(p,t),r&&r.invalidate(),i=me(n,e[2],{}),s=!1},d(e){e&&b(t),p&&p.d(e),e&&i&&i.end(),a=!1,o(c)}}}function Ci(e,t,n){let{$$slots:r={},$$scope:o}=t;const i=z();function s(e,{delay:t=0,duration:n=400,easing:r=Ne}={}){return{delay:t,duration:n,easing:r,css:e=>`transform: translate(-${100*(1-e)}%);`}}U((()=>document.getElementsByTagName("main")[0].classList.add("filter","blur")));return e.$$set=e=>{"$$scope"in e&&n(3,o=e.$$scope)},[i,s,function(e,t){return document.getElementsByTagName("main")[0].classList.remove("filter","blur"),s(0,t)},o,r,function(t){H(e,t)},()=>i("close")]}class Ni extends ke{constructor(e){super(),we(this,e,Ci,Ii,s,{})}}function Ti(e,t,n){const r=e.slice();return r[12]=t[n],r}function Mi(e){let t,n;return t=new Ni({props:{$$slots:{default:[qi]},$$scope:{ctx:e}}}),t.$on("close",e[9]),{c(){$e(t.$$.fragment)},m(e,r){ye(t,e,r),n=!0},p(e,n){const r={};32769&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(fe(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Oi(e){let t,n,r,o,i=e[12].name+"";function s(){return e[8](e[12])}return{c(){t=w("li"),n=k(i)},m(e,i){y(e,t,i),$(t,n),r||(o=S(t,"click",s),r=!0)},p(t,r){e=t,1&r&&i!==(i=e[12].name+"")&&N(n,i)},d(e){e&&b(t),r=!1,o()}}}function qi(e){let t,n,r,i,s,a,l,c,u,f=e[0],p=[];for(let t=0;t<f.length;t+=1)p[t]=Oi(Ti(e,f,t));return{c(){t=w("span"),t.textContent="Characters",n=_(),r=w("ul");for(let e=0;e<p.length;e+=1)p[e].c();i=_(),s=w("li"),s.textContent="+",a=_(),l=w("span"),l.textContent="Settings",I(r,"class","ml-2"),I(l,"class","pointer-cursor mt-6 p-2")},m(o,f){y(o,t,f),y(o,n,f),y(o,r,f);for(let e=0;e<p.length;e+=1)p[e].m(r,null);$(r,i),$(r,s),y(o,a,f),y(o,l,f),c||(u=[S(s,"click",e[5]),S(l,"click",e[6])],c=!0)},p(e,t){if(17&t){let n;for(f=e[0],n=0;n<f.length;n+=1){const o=Ti(e,f,n);p[n]?p[n].p(o,t):(p[n]=Oi(o),p[n].c(),p[n].m(r,i))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}},d(e){e&&b(t),e&&b(n),e&&b(r),x(p,e),e&&b(a),e&&b(l),c=!1,o(u)}}}function Di(t){let n,r;return n=new st({}),n.$on("close",t[10]),{c(){$e(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(fe(n.$$.fragment,e),r=!0)},o(e){pe(n.$$.fragment,e),r=!1},d(e){be(n,e)}}}function Ri(e){let t,n,r,o,i,s,a,l,c,u=e[1]&&Mi(e),f=e[2]&&Di(e);return s=new Ai({props:{data:e[3]}}),{c(){t=w("button"),t.textContent="menu",n=_(),u&&u.c(),r=_(),f&&f.c(),o=_(),i=w("main"),$e(s.$$.fragment),I(t,"class","material-icons m-2 text-gray-200"),I(i,"class","flex flex-col my-4 mx-auto container")},m(p,h){y(p,t,h),y(p,n,h),u&&u.m(p,h),y(p,r,h),f&&f.m(p,h),y(p,o,h),y(p,i,h),ye(s,i,null),a=!0,l||(c=S(t,"click",e[7]),l=!0)},p(e,[t]){e[1]?u?(u.p(e,t),2&t&&fe(u,1)):(u=Mi(e),u.c(),fe(u,1),u.m(r.parentNode,r)):u&&(ce(),pe(u,1,1,(()=>{u=null})),ue()),e[2]?f?(f.p(e,t),4&t&&fe(f,1)):(f=Di(e),f.c(),fe(f,1),f.m(o.parentNode,o)):f&&(ce(),pe(f,1,1,(()=>{f=null})),ue());const n={};8&t&&(n.data=e[3]),s.$set(n)},i(e){a||(fe(u),fe(f),fe(s.$$.fragment,e),a=!0)},o(e){pe(u),pe(f),pe(s.$$.fragment,e),a=!1},d(e){e&&b(t),e&&b(n),u&&u.d(e),e&&b(r),f&&f.d(e),e&&b(o),e&&b(i),be(s),l=!1,c()}}}function ji(e,t,n){var r;let{items:o}=t,i=!1,s=!1,a=null!==(r=o[0])&&void 0!==r?r:new cr;function l(e){n(3,a=e),n(1,i=!1)}return e.$$set=e=>{"items"in e&&n(0,o=e.items)},[o,i,s,a,l,function(){o.push(new cr),n(0,o)},function(){n(1,i=!1),n(2,s=!0)},()=>n(1,i=!0),e=>l(e),()=>n(1,i=!1),()=>n(2,s=!1)]}class Pi extends ke{constructor(e){super(),we(this,e,ji,Ri,s,{items:0})}}function Fi(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Bi(t){let n,r;return n=new Pi({props:{items:Object.values(t[1])}}),{c(){$e(n.$$.fragment)},m(e,t){ye(n,e,t),r=!0},p:e,i(e){r||(fe(n.$$.fragment,e),r=!0)},o(e){pe(n.$$.fragment,e),r=!1},d(e){be(n,e)}}}function Li(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Wi(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:Li,then:Bi,catch:Fi,value:1,blocks:[,,,]};return function(e,t){const n=t.token={};function r(e,r,o,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(ce(),pe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),ue())})):t.block.d(1),a.c(),fe(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[r]=a),l&&ne()}if((o=e)&&"object"==typeof o&&"function"==typeof o.then){const n=W();if(e.then((e=>{L(n),r(t.then,1,t.value,e),L(null)}),(e=>{if(L(n),r(t.catch,2,t.error,e),L(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var o}(Ae.getItems(),r),{c(){t=w("div"),r.block.c(),I(t,"class",e[0])},m(e,o){y(e,t,o),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null,n=!0},p(o,[i]){(function(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)})(r,e=o,i),(!n||1&i)&&I(t,"class",e[0])},i(e){n||(fe(r.block),n=!0)},o(e){for(let e=0;e<3;e+=1){pe(r.blocks[e])}n=!1},d(e){e&&b(t),r.block.d(),r.token=null,r=null}}}function Ui(e,t,n){let r;return a(e,ot,(e=>n(0,r=e))),Ie.extendPrototype(Ae),[r]}return new class extends ke{constructor(e){super(),we(this,e,Ui,Wi,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
